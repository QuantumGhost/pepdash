<!doctype html>
<!--[if lt IE 7]>   <html class="no-js ie6 lt-ie7 lt-ie8 lt-ie9">   <![endif]-->
<!--[if IE 7]>      <html class="no-js ie7 lt-ie8 lt-ie9">          <![endif]-->
<!--[if IE 8]>      <html class="no-js ie8 lt-ie9">                 <![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en" dir="ltr">  <!--<![endif]-->


<!-- Mirrored from www.python.org/dev/peps/pep-0489/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 03 Sep 2015 04:35:00 GMT -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="prefetch" href="../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">

    <meta name="application-name" content="Python.org">
    <meta name="msapplication-tooltip" content="The official home of the Python Programming Language">
    <meta name="apple-mobile-web-app-title" content="Python.org">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="HandheldFriendly" content="True">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="cleartype" content="on">
    <meta http-equiv="imagetoolbar" content="false">

    <script src="../../../static/js/libs/modernizr.js"></script>

    <link href="../../../static/stylesheets/style.css" rel="stylesheet" type="text/css" title="default" />
    <link href="../../../static/stylesheets/mq.css" rel="stylesheet" type="text/css" media="not print, braille, embossed, speech, tty" />
    

    <!--[if (lte IE 8)&(!IEMobile)]>
    <link href="/static/stylesheets/no-mq.css" rel="stylesheet" type="text/css" media="screen" />
    
    
    <![endif]-->

    
    <link rel="icon" type="image/x-icon" href="https://www.python.org/static/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../static/apple-touch-icon-144x144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../static/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../static/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../../../static/apple-touch-icon-precomposed.png">
    <link rel="apple-touch-icon" href="../../../static/apple-touch-icon-precomposed.png">

    
    <meta name="msapplication-TileImage" content="/static/metro-icon-144x144-precomposed.png"><!-- white shape -->
    <meta name="msapplication-TileColor" content="#3673a5"><!-- python blue -->
    <meta name="msapplication-navbutton-color" content="#3673a5">

    <meta property="og:site_name" content="Python.org">
    <meta property="og:type" content="website">

    <title>PEP 0489 -- Multi-phase extension module initialization | Python.org</title>
    <meta property="og:title" content="Welcome to Python.org">

    
    <meta name="description" content="The official home of the Python Programming Language">
    <meta name="og:description" content="The official home of the Python Programming Language">
    <meta name="keywords" content="Python programming language object oriented web free open source software license documentation download community">
    <meta property="og:tag" content="Python programming language object oriented web free open source software license documentation download community">
    <meta property="og:published_time" content="">
    <meta property="og:modified_time" content="">
    <meta property="og:author" content="">
    <meta property="og:section" content=""> 
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <meta property="og:video" content="">

    <link rel="author" href="https://www.python.org/static/humans.txt">

    

    
    <script type="application/ld+json">
     {
       "@context": "http://schema.org",
       "@type": "WebSite",
       "url": "https://www.python.org/",
       "potentialAction": {
         "@type": "SearchAction",
         "target": "https://www.python.org/search/?q={search_term_string}",
         "query-input": "required name=search_term_string"
       }
     }
    </script>

    
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39055973-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
    
</head>

<body class="python pages pep-page">

    <div id="touchnav-wrapper">

        <div id="nojs" class="do-not-print">
            <p><strong>Notice:</strong> While Javascript is not essential for this website, your interaction with the content will be limited. Please turn Javascript on for the full experience. </p>
        </div>

        <!--[if lt IE 8]>
        <div id="oldie-warning" class="do-not-print">
            <p><strong>Notice:</strong> Your browser is <em>ancient</em> and <a href="http://www.ie6countdown.com/">Microsoft agrees</a>. <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience a better web.</p>
        </div>
        <![endif]-->

        <!-- Sister Site Links -->
        <div id="top" class="top-bar do-not-print">

            <nav class="meta-navigation container" role="navigation">

                
                <div class="skip-link screen-reader-text">
                    <a href="#content" title="Skip to content">Skip to content</a>
                </div>

                
                <a id="close-python-network" class="jump-link" href="#python-network" aria-hidden="true">
                    <span aria-hidden="true" class="icon-arrow-down"><span>&#9660;</span></span> Close
                </a>

                

<ul class="menu" role="tree">
    
    <li class="python-meta ">
        <a href="https://www.python.org/" title="The Python Programming Language" >Python</a>
    </li>
    
    <li class="psf-meta ">
        <a href="https://www.python.org/psf-landing/" title="The Python Software Foundation" >PSF</a>
    </li>
    
    <li class="docs-meta ">
        <a href="https://docs.python.org/" title="Python Documentation" >Docs</a>
    </li>
    
    <li class="pypi-meta ">
        <a href="https://pypi.python.org/" title="Python Package Index" >PyPI</a>
    </li>
    
    <li class="jobs-meta ">
        <a href="https://www.python.org/jobs/" title="Python Job Board" >Jobs</a>
    </li>
    
    <li class="shop-meta ">
        <a href="https://www.python.org/community/" title="Python Community" >Community</a>
    </li>
    
</ul>


                <a id="python-network" class="jump-link" href="#top" aria-hidden="true">
                    <span aria-hidden="true" class="icon-arrow-up"><span>&#9650;</span></span> The Python Network
                </a>

            </nav>

        </div>

        <!-- Header elements -->
        <header class="main-header" role="banner">
            <div class="container">

                <h1 class="site-headline">
                    <a href="https://www.python.org/"><img class="python-logo" src="../../../static/img/python-logo.png" alt="python&trade;"></a>
                </h1>

                <div class="options-bar do-not-print">

                    
                    <a id="site-map-link" class="jump-to-menu" href="#site-map"><span class="menu-icon">&equiv;</span> Menu</a><form class="search-the-site" action="https://www.python.org/search/" method="get">
                        <fieldset title="Search Python.org">

                            <span aria-hidden="true" class="icon-search"></span>

                            <label class="screen-reader-text" for="id-search-field">Search This Site</label>
                            <input id="id-search-field" name="q" type="search" role="textbox" class="search-field" placeholder="Search" value="" tabindex="1">

                            <button type="submit" name="submit" id="submit" class="search-button" title="Submit this Search" tabindex="3">
                                GO
                            </button>

                            
                            <!--[if IE]><input type="text" style="display: none;" disabled="disabled" size="1" tabindex="4"><![endif]-->

                        </fieldset>
                    </form><span class="breaker"></span><div class="adjust-font-size" aria-hidden="true">
                        <ul class="navigation menu" aria-label="Adjust Text Size on Page">
                            <li class="tier-1 last" aria-haspopup="true">
                                <a href="#" class="action-trigger"><strong><small>A</small> A</strong></a>
                                <ul class="subnav menu">
                                    <li class="tier-2 element-1" role="treeitem"><a class="text-shrink" title="Make Text Smaller" href="javascript:;">Smaller</a></li>
                                    <li class="tier-2 element-2" role="treeitem"><a class="text-grow" title="Make Text Larger" href="javascript:;">Larger</a></li>
                                    <li class="tier-2 element-3" role="treeitem"><a class="text-reset" title="Reset any font size changes I have made" href="javascript:;">Reset</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div><div class="winkwink-nudgenudge">
                        <ul class="navigation menu" aria-label="Social Media Navigation">
                            <li class="tier-1 last" aria-haspopup="true">
                                <a href="#" class="action-trigger">Socialize</a>
                                <ul class="subnav menu">
                                    <li class="tier-2 element-1" role="treeitem"><a href="http://plus.google.com/+Python"><span aria-hidden="true" class="icon-google-plus"></span>Google+</a></li>
                                    <li class="tier-2 element-2" role="treeitem"><a href="http://www.facebook.com/pythonlang?fref=ts"><span aria-hidden="true" class="icon-facebook"></span>Facebook</a></li>
                                    <li class="tier-2 element-3" role="treeitem"><a href="http://twitter.com/ThePSF"><span aria-hidden="true" class="icon-twitter"></span>Twitter</a></li>
                                    <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/community/irc/"><span aria-hidden="true" class="icon-freenode"></span>Chat on IRC</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div><div class="account-signin">
                        <ul class="navigation menu" aria-label="Social Media Navigation">
                            <li class="tier-1 last" aria-haspopup="true">
                                
                                <a href="https://www.python.org/accounts/login/" title="Sign Up or Sign In to Python.org">Sign In</a>
                                <ul class="subnav menu">
                                    <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/accounts/signup/">Sign Up / Register</a></li>
                                    <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/accounts/login/">Sign In</a></li>
                                </ul>
                                
                            </li>
                        </ul>
                    </div>

                </div><!-- end options-bar -->

                <nav id="mainnav" class="python-navigation main-navigation do-not-print" role="navigation">
                    
                        
<ul class="navigation menu" role="menubar" aria-label="Main Navigation">
  
    
    
    <li id="about" class="tier-1 element-1  " aria-haspopup="true">
        <a href="https://www.python.org/about/" title="" class="">About</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/about/apps/" title="">Applications</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/about/quotes/" title="">Quotes</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/about/gettingstarted/" title="">Getting Started</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/about/help/" title="">Help</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="downloads" class="tier-1 element-2  " aria-haspopup="true">
        <a href="https://www.python.org/downloads/" title="" class="">Downloads</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/downloads/" title="">All releases</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/downloads/source/" title="">Source code</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/downloads/windows/" title="">Windows</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/downloads/mac-osx/" title="">Mac OS X</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/download/other/" title="">Other Platforms</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://docs.python.org/3/license.html" title="">License</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/download/alternatives" title="">Alternative Implementations</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="documentation" class="tier-1 element-3  " aria-haspopup="true">
        <a href="https://www.python.org/doc/" title="" class="">Documentation</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/doc/" title="">Docs</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/doc/av" title="">Audio/Visual Talks</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://wiki.python.org/moin/BeginnersGuide" title="">Beginner&#39;s Guide</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://docs.python.org/devguide/" title="">Developer&#39;s Guide</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://docs.python.org/faq/" title="">FAQ</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="http://wiki.python.org/moin/Languages" title="">Non-English Docs</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="../index.html" title="">PEP Index</a></li>
    
        <li class="tier-2 element-8" role="treeitem"><a href="https://wiki.python.org/moin/PythonBooks" title="">Python Books</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="community" class="tier-1 element-4  " aria-haspopup="true">
        <a href="https://www.python.org/community/" title="" class="">Community</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/community/diversity/" title="">Diversity</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/community/irc/" title="">IRC</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/community/lists/" title="">Mailing Lists</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/community/workshops/" title="">Python Conferences</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/community/sigs/" title="">Special Interest Groups</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://wiki.python.org/moin/" title="">Python Wiki</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/community/logos/" title="">Python Logo</a></li>
    
        <li class="tier-2 element-8" role="treeitem"><a href="https://www.python.org/community/merchandise/" title="">Merchandise</a></li>
    
        <li class="tier-2 element-9" role="treeitem"><a href="https://www.python.org/community/awards" title="">Community Awards</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="success-stories" class="tier-1 element-5  " aria-haspopup="true">
        <a href="https://www.python.org/about/success/" title="success-stories" class="">Success Stories</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/about/success/#arts" title="">Arts</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/about/success/#business" title="">Business</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/about/success/#education" title="">Education</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/about/success/#engineering" title="">Engineering</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/about/success/#government" title="">Government</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://www.python.org/about/success/#scientific" title="">Scientific</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/about/success/#software-development" title="">Software Development</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="news" class="tier-1 element-6  " aria-haspopup="true">
        <a href="https://www.python.org/blogs/" title="News from around the Python world" class="">News</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/blogs/" title="Python Insider Blog Posts">Python News</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="http://planetpython.org/" title="Planet Python">Community News</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="http://pyfound.blogspot.com/" title="PSF Blog">PSF News</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="http://pycon.blogspot.com/" title="PyCon Blog">PyCon News</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="events" class="tier-1 element-7  " aria-haspopup="true">
        <a href="https://www.python.org/events/" title="" class="">Events</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/events/python-events/" title="">Python Events</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/events/python-user-group/" title="">User Group Events</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/events/python-events/past/" title="">Python Events Archive</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/events/python-user-group/past/" title="">User Group Events Archive</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://wiki.python.org/moin/PythonEventsCalendar#Submitting_an_Event" title="">Submit an Event</a></li>
    
</ul>

        
    </li>
    
    
    
    
  
</ul>

                    
                </nav>

                <div class="header-banner "> <!-- for optional "do-not-print" class -->
                    
                    
                </div>

                
                

             </div><!-- end .container -->
        </header>

        <div id="content" class="content-wrapper">
            <!-- Main Content Column -->
            <div class="container">

                <section class="main-content with-left-sidebar" role="main">

                    
<ul class="breadcrumbs menu">
    <li>
        <a href="https://www.python.org/" title="The Python Programming Language">Python</a><span class="prompt">&gt;&gt;&gt;</span>
    </li>
    <li>
        <a href="https://www.python.org/dev/">Python Developer's Guide</a><span class="prompt">&gt;&gt;&gt;</span>
    </li>
    <li>
        <a href="../index.html">PEP Index</a><span class="prompt">&gt;&gt;&gt;</span>
    </li>
    <li>PEP 0489 -- Multi-phase extension module initialization</li>
</ul>


                    
<style>
   .pep-page pre {
        padding: .5em;
        background: inherit;
        border-left: 0px;
        -webkit-box-shadow: 0 0 0 0;
        -moz-box-shadow: 0 0 0 0;
        box-shadow: 0 0 0 0;
   }
</style>

    
    <article class="text">
        

        <header class="article-header">
            <h1 class="page-title">PEP 0489 -- Multi-phase extension module initialization</h1>
        </header>

        <!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<html>
 <body>
  <table class="rfc2822 docutils field-list" frame="void" rules="none">
   <col class="field-name">
   </col>
   <col class="field-body">
   </col>
   <tbody valign="top">
    <tr class="field">
     <th class="field-name">
      PEP:
     </th>
     <td class="field-body">
      489
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Title:
     </th>
     <td class="field-body">
      Multi-phase extension module initialization
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Author:
     </th>
     <td class="field-body">
      Petr Viktorin &lt;encukou at gmail.com&gt;,
Stefan Behnel &lt;stefan_ml at behnel.de&gt;,
Nick Coghlan &lt;ncoghlan at gmail.com&gt;
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      BDFL-Delegate:
     </th>
     <td class="field-body">
      Eric Snow &lt;
      <a class="reference external" href="mailto:ericsnowcurrently@gmail.com">
       ericsnowcurrently@gmail.com
      </a>
      &gt;
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Discussions-To:
     </th>
     <td class="field-body">
      <a class="reference external" href="mailto:import-sig@python.org?subject=PEP%20489">
       import-sig at python.org
      </a>
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Status:
     </th>
     <td class="field-body">
      Final
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Type:
     </th>
     <td class="field-body">
      Standards Track
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Created:
     </th>
     <td class="field-body">
      11-Aug-2013
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Python-Version:
     </th>
     <td class="field-body">
      3.5
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Post-History:
     </th>
     <td class="field-body">
      23-Aug-2013, 20-Feb-2015, 16-Apr-2015, 7-May-2015, 18-May-2015
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Resolution:
     </th>
     <td class="field-body">
      <a class="reference external" href="https://mail.python.org/pipermail/python-dev/2015-May/140108.html">
       https://mail.python.org/pipermail/python-dev/2015-May/140108.html
      </a>
     </td>
    </tr>
   </tbody>
  </table>
  <hr/>
  <div class="contents topic" id="contents">
   <p class="topic-title first">
    Contents
   </p>
   <ul class="simple">
    <li>
     <a class="reference internal" href="#abstract" id="id11">
      Abstract
     </a>
    </li>
    <li>
     <a class="reference internal" href="#motivation" id="id12">
      Motivation
     </a>
    </li>
    <li>
     <a class="reference internal" href="#the-current-process" id="id13">
      The current process
     </a>
    </li>
    <li>
     <a class="reference internal" href="#the-proposal" id="id14">
      The proposal
     </a>
     <ul>
      <li>
       <a class="reference internal" href="#pseudo-code-overview" id="id15">
        Pseudo-code Overview
       </a>
      </li>
      <li>
       <a class="reference internal" href="#module-creation-phase" id="id16">
        Module Creation Phase
       </a>
       <ul>
        <li>
         <a class="reference internal" href="#the-py-mod-create-slot" id="id17">
          The Py_mod_create slot
         </a>
        </li>
        <li>
         <a class="reference internal" href="#post-creation-steps" id="id18">
          Post-creation steps
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a class="reference internal" href="#module-execution-phase" id="id19">
        Module Execution Phase
       </a>
       <ul>
        <li>
         <a class="reference internal" href="#pre-execution-steps" id="id20">
          Pre-Execution steps
         </a>
        </li>
        <li>
         <a class="reference internal" href="#the-py-mod-exec-slot" id="id21">
          The Py_mod_exec slot
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a class="reference internal" href="#legacy-init" id="id22">
        Legacy Init
       </a>
      </li>
      <li>
       <a class="reference internal" href="#built-in-modules" id="id23">
        Built-In modules
       </a>
      </li>
      <li>
       <a class="reference internal" href="#subinterpreters-and-interpreter-reloading" id="id24">
        Subinterpreters and Interpreter Reloading
       </a>
      </li>
      <li>
       <a class="reference internal" href="#functions-incompatible-with-multi-phase-initialization" id="id25">
        Functions incompatible with multi-phase initialization
       </a>
      </li>
      <li>
       <a class="reference internal" href="#module-state-and-c-level-callbacks" id="id26">
        Module state and C-level callbacks
       </a>
      </li>
      <li>
       <a class="reference internal" href="#new-functions" id="id27">
        New Functions
       </a>
      </li>
      <li>
       <a class="reference internal" href="#export-hook-name" id="id28">
        Export Hook Name
       </a>
      </li>
      <li>
       <a class="reference internal" href="#module-reloading" id="id29">
        Module Reloading
       </a>
      </li>
      <li>
       <a class="reference internal" href="#multiple-modules-in-one-library" id="id30">
        Multiple modules in one library
       </a>
      </li>
      <li>
       <a class="reference internal" href="#testing-and-initial-implementations" id="id31">
        Testing and initial implementations
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a class="reference internal" href="#summary-of-api-changes-and-additions" id="id32">
      Summary of API Changes and Additions
     </a>
     <ul>
      <li>
       <a class="reference internal" href="#backwards-compatibility" id="id33">
        Backwards Compatibility
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a class="reference internal" href="#possible-future-extensions" id="id34">
      Possible Future Extensions
     </a>
    </li>
    <li>
     <a class="reference internal" href="#implementation" id="id35">
      Implementation
     </a>
    </li>
    <li>
     <a class="reference internal" href="#previous-approaches" id="id36">
      Previous Approaches
     </a>
    </li>
    <li>
     <a class="reference internal" href="#references" id="id37">
      References
     </a>
    </li>
    <li>
     <a class="reference internal" href="#copyright" id="id38">
      Copyright
     </a>
    </li>
   </ul>
  </div>
  <div class="section" id="abstract">
   <h1>
    <a class="toc-backref" href="#id11">
     Abstract
    </a>
   </h1>
   <p>
    This PEP proposes a redesign of the way in which built-in and extension modules
interact with the import machinery. This was last revised for Python 3.0 in
    <a class="reference external" href="../pep-3121/index.html">
     PEP
3121
    </a>
    , but did not solve all problems at the time. The goal is to solve
import-related problems by bringing extension modules closer to the way Python
modules behave; specifically to hook into the ModuleSpec-based loading
mechanism introduced in
    <a class="reference external" href="../pep-0451/index.html">
     PEP 451
    </a>
    .
   </p>
   <p>
    This proposal draws inspiration from PyType_Spec of
    <a class="reference external" href="../pep-0384/index.html">
     PEP 384
    </a>
    to allow extension
authors to only define features they need, and to allow future additions
to extension module declarations.
   </p>
   <p>
    Extensions modules are created in a two-step process, fitting better into
the ModuleSpec architecture, with parallels to __new__ and __init__ of classes.
   </p>
   <p>
    Extension modules can safely store arbitrary C-level per-module state in
the module that is covered by normal garbage collection and supports
reloading and sub-interpreters.
Extension authors are encouraged to take these issues into account
when using the new API.
   </p>
   <p>
    The proposal also allows extension modules with non-ASCII names.
   </p>
   <p>
    Not all problems tackled in
    <a class="reference external" href="../pep-3121/index.html">
     PEP 3121
    </a>
    are solved in this proposal.
In particular, problems with run-time module lookup (PyState_FindModule)
are left to a future PEP.
   </p>
  </div>
  <div class="section" id="motivation">
   <h1>
    <a class="toc-backref" href="#id12">
     Motivation
    </a>
   </h1>
   <p>
    Python modules and extension modules are not being set up in the same way.
For Python modules, the module object is created and set up first, then the
module code is being executed (
    <a class="reference external" href="../pep-0302/index.html">
     PEP 302
    </a>
    ).
A ModuleSpec object (
    <a class="reference external" href="../pep-0451/index.html">
     PEP 451
    </a>
    ) is used to hold information about the module,
and passed to the relevant hooks.
   </p>
   <p>
    For extensions (i.e. shared libraries) and built-in modules, the module
init function is executed straight away and does both the creation and
initialization. The initialization function is not passed the ModuleSpec,
or any information it contains, such as the __file__ or fully-qualified
name. This hinders relative imports and resource loading.
   </p>
   <p>
    In Py3, modules are also not being added to sys.modules, which means that a
(potentially transitive) re-import of the module will really try to re-import
it and thus run into an infinite loop when it executes the module init function
again. Without access to the fully-qualified module name, it is not trivial to
correctly add the module to sys.modules either.
This is specifically a problem for Cython generated modules, for which it's
not uncommon that the module init code has the same level of complexity as
that of any 'regular' Python module. Also, the lack of __file__ and __name__
information hinders the compilation of "__init__.py" modules, i.e. packages,
especially when relative imports are being used at module init time.
   </p>
   <p>
    Furthermore, the majority of currently existing extension modules has
problems with sub-interpreter support and/or interpreter reloading, and, while
it is possible with the current infrastructure to support these
features, it is neither easy nor efficient.
Addressing these issues was the goal of
    <a class="reference external" href="../pep-3121/index.html">
     PEP 3121
    </a>
    , but many extensions,
including some in the standard library, took the least-effort approach
to porting to Python 3, leaving these issues unresolved.
This PEP keeps backwards compatibility, which should reduce pressure and give
extension authors adequate time to consider these issues when porting.
   </p>
  </div>
  <div class="section" id="the-current-process">
   <h1>
    <a class="toc-backref" href="#id13">
     The current process
    </a>
   </h1>
   <p>
    Currently, extension and built-in modules export an initialization function
named "PyInit_modulename", named after the file name of the shared library.
This function is executed by the import machinery and must return a fully
initialized module object.
The function receives no arguments, so it has no way of knowing about its
import context.
   </p>
   <p>
    During its execution, the module init function creates a module object
based on a PyModuleDef object. It then continues to initialize it by adding
attributes to the module dict, creating types, etc.
   </p>
   <p>
    In the back, the shared library loader keeps a note of the fully qualified
module name of the last module that it loaded, and when a module gets
created that has a matching name, this global variable is used to determine
the fully qualified name of the module object. This is not entirely safe as it
relies on the module init function creating its own module object first,
but this assumption usually holds in practice.
   </p>
  </div>
  <div class="section" id="the-proposal">
   <h1>
    <a class="toc-backref" href="#id14">
     The proposal
    </a>
   </h1>
   <p>
    The initialization function (PyInit_modulename) will be allowed to return
a pointer to a PyModuleDef object. The import machinery will be in charge
of constructing the module object, calling hooks provided in the PyModuleDef
in the relevant phases of initialization (as described below).
   </p>
   <p>
    This multi-phase initialization is an additional possibility. Single-phase
initialization, the current practice of returning a fully initialized module
object, will still be accepted, so existing code will work unchanged,
including binary compatibility.
   </p>
   <p>
    The PyModuleDef structure will be changed to contain a list of slots,
similarly to
    <a class="reference external" href="../pep-0384/index.html">
     PEP 384
    </a>
    's PyType_Spec for types.
To keep binary compatibility, and avoid needing to introduce a new structure
(which would introduce additional supporting functions and per-module storage),
the currently unused m_reload pointer of PyModuleDef will be changed to
hold the slots. The structures are defined as:
   </p>
   <pre class="literal-block">
typedef struct {
    int slot;
    void *value;
} PyModuleDef_Slot;

typedef struct PyModuleDef {
    PyModuleDef_Base m_base;
    const char* m_name;
    const char* m_doc;
    Py_ssize_t m_size;
    PyMethodDef *m_methods;
    PyModuleDef_Slot *m_slots;  /* changed from `inquiry m_reload;` */
    traverseproc m_traverse;
    inquiry m_clear;
    freefunc m_free;
} PyModuleDef;
</pre>
   <p>
    The
    <em>
     m_slots
    </em>
    member must be either NULL, or point to an array of
PyModuleDef_Slot structures, terminated by a slot with id set to 0
(i.e.
    <tt class="docutils literal">
     {0, NULL}
    </tt>
    ).
   </p>
   <p>
    To specify a slot, a unique slot ID must be provided.
New Python versions may introduce new slot IDs, but slot IDs will never be
recycled. Slots may get deprecated, but will continue to be supported
throughout Python 3.x.
   </p>
   <p>
    A slot's value pointer may not be NULL, unless specified otherwise in the
slot's documentation.
   </p>
   <p>
    The following slots are currently available, and described later:
   </p>
   <ul class="simple">
    <li>
     Py_mod_create
    </li>
    <li>
     Py_mod_exec
    </li>
   </ul>
   <p>
    Unknown slot IDs will cause the import to fail with SystemError.
   </p>
   <p>
    When using multi-phase initialization, the
    <em>
     m_name
    </em>
    field of PyModuleDef will
not be used during importing; the module name will be taken from the ModuleSpec.
   </p>
   <p>
    Before it is returned from PyInit_*, the PyModuleDef object must be initialized
using the newly added PyModuleDef_Init function. This sets the object type
(which cannot be done statically on certain compilers), refcount, and internal
bookkeeping data (m_index).
For example, an extension module "example" would be exported as:
   </p>
   <pre class="literal-block">
static PyModuleDef example_def = {...}

PyMODINIT_FUNC
PyInit_example(void)
{
    return PyModuleDef_Init(&amp;example_def);
}
</pre>
   <p>
    The PyModuleDef object must be available for the lifetime of the module created
from it – usually, it will be declared statically.
   </p>
   <div class="section" id="pseudo-code-overview">
    <h2>
     <a class="toc-backref" href="#id15">
      Pseudo-code Overview
     </a>
    </h2>
    <p>
     Here is an overview of how the modified importers will operate.
Details such as logging or handling of errors and invalid states
are left out, and C code is presented with a concise Python-like syntax.
    </p>
    <p>
     The framework that calls the importers is explained in
     <a class="reference external" href="../pep-0451/index.html">
      PEP 451
     </a>
     <a class="footnote-reference" href="#pep-0451-loading" id="id1">
      [8]
     </a>
     .
    </p>
    <p>
     importlib/_bootstrap.py:
    </p>
    <blockquote>
     <pre class="literal-block">
class BuiltinImporter:
    def create_module(self, spec):
        module = _imp.create_builtin(spec)

    def exec_module(self, module):
        _imp.exec_dynamic(module)

    def load_module(self, name):
        # use a backwards compatibility shim
        _load_module_shim(self, name)
</pre>
    </blockquote>
    <p>
     importlib/_bootstrap_external.py:
    </p>
    <blockquote>
     <pre class="literal-block">
class ExtensionFileLoader:
    def create_module(self, spec):
        module = _imp.create_dynamic(spec)

    def exec_module(self, module):
        _imp.exec_dynamic(module)

    def load_module(self, name):
        # use a backwards compatibility shim
        _load_module_shim(self, name)
</pre>
    </blockquote>
    <p>
     Python/import.c (the _imp module):
    </p>
    <blockquote>
     <pre class="literal-block">
def create_dynamic(spec):
    name = spec.name
    path = spec.origin

    # Find an already loaded module that used single-phase init.
    # For multi-phase initialization, mod is NULL, so a new module
    # is always created.
    mod = _PyImport_FindExtensionObject(name, name)
    if mod:
        return mod

    return _PyImport_LoadDynamicModuleWithSpec(spec)

def exec_dynamic(module):
    if not isinstance(module, types.ModuleType):
        # non-modules are skipped -- PyModule_GetDef fails on them
        return

    def = PyModule_GetDef(module)
    state = PyModule_GetState(module)
    if state is NULL:
        PyModule_ExecDef(module, def)

def create_builtin(spec):
    name = spec.name

    # Find an already loaded module that used single-phase init.
    # For multi-phase initialization, mod is NULL, so a new module
    # is always created.
    mod = _PyImport_FindExtensionObject(name, name)
    if mod:
        return mod

    for initname, initfunc in PyImport_Inittab:
        if name == initname:
            m = initfunc()
            if isinstance(m, PyModuleDef):
                def = m
                return PyModule_FromDefAndSpec(def, spec)
            else:
                # fall back to single-phase initialization
                module = m
                _PyImport_FixupExtensionObject(module, name, name)
                return module
</pre>
    </blockquote>
    <p>
     Python/importdl.c:
    </p>
    <blockquote>
     <pre class="literal-block">
def _PyImport_LoadDynamicModuleWithSpec(spec):
    path = spec.origin
    package, dot, name = spec.name.rpartition('.')

    # see the "Non-ASCII module names" section for export_hook_name
    hook_name = export_hook_name(name)

    # call platform-specific function for loading exported function
    # from shared library
    exportfunc = _find_shared_funcptr(hook_name, path)

    m = exportfunc()
    if isinstance(m, PyModuleDef):
        def = m
        return PyModule_FromDefAndSpec(def, spec)

    module = m

    # fall back to single-phase initialization
    ....
</pre>
    </blockquote>
    <p>
     Objects/moduleobject.c:
    </p>
    <blockquote>
     <pre class="literal-block">
def PyModule_FromDefAndSpec(def, spec):
    name = spec.name
    create = None
    for slot, value in def.m_slots:
        if slot == Py_mod_create:
            create = value
    if create:
        m = create(spec, def)
    else:
        m = PyModule_New(name)

    if isinstance(m, types.ModuleType):
        m.md_state = None
        m.md_def = def

    if def.m_methods:
        PyModule_AddFunctions(m, def.m_methods)
    if def.m_doc:
        PyModule_SetDocString(m, def.m_doc)

def PyModule_ExecDef(module, def):
    if isinstance(module, types.module_type):
        if module.md_state is NULL:
            # allocate a block of zeroed-out memory
            module.md_state = _alloc(module.md_size)

    if def.m_slots is NULL:
        return

    for slot, value in def.m_slots:
        if slot == Py_mod_exec:
            value(module)
</pre>
    </blockquote>
   </div>
   <div class="section" id="module-creation-phase">
    <h2>
     <a class="toc-backref" href="#id16">
      Module Creation Phase
     </a>
    </h2>
    <p>
     Creation of the module object – that is, the implementation of
ExecutionLoader.create_module – is governed by the Py_mod_create slot.
    </p>
    <div class="section" id="the-py-mod-create-slot">
     <h3>
      <a class="toc-backref" href="#id17">
       The Py_mod_create slot
      </a>
     </h3>
     <p>
      The Py_mod_create slot is used to support custom module subclasses.
The value pointer must point to a function with the following signature:
     </p>
     <pre class="literal-block">
PyObject* (*PyModuleCreateFunction)(PyObject *spec, PyModuleDef *def)
</pre>
     <p>
      The function receives a ModuleSpec instance, as defined in
      <a class="reference external" href="../pep-0451/index.html">
       PEP 451
      </a>
      ,
and the PyModuleDef structure.
It should return a new module object, or set an error
and return NULL.
     </p>
     <p>
      This function is not responsible for setting import-related attributes
specified in
      <a class="reference external" href="../pep-0451/index.html">
       PEP 451
      </a>
      <a class="footnote-reference" href="#pep-0451-attributes" id="id2">
       [1]
      </a>
      (such as
      <tt class="docutils literal">
       __name__
      </tt>
      or
      <tt class="docutils literal">
       __loader__
      </tt>
      ) on the new module.
     </p>
     <p>
      There is no requirement for the returned object to be an instance of
types.ModuleType. Any type can be used, as long as it supports setting and
getting attributes, including at least the import-related attributes.
However, only ModuleType instances support module-specific functionality
such as per-module state and processing of execution slots.
If something other than a ModuleType subclass is returned, no execution slots
may be defined; if any are, a SystemError is raised.
     </p>
     <p>
      Note that when this function is called, the module's entry in sys.modules
is not populated yet. Attempting to import the same module again
(possibly transitively), may lead to an infinite loop.
Extension authors are advised to keep Py_mod_create minimal, an in particular
to not call user code from it.
     </p>
     <p>
      Multiple Py_mod_create slots may not be specified. If they are, import
will fail with SystemError.
     </p>
     <p>
      If Py_mod_create is not specified, the import machinery will create a normal
module object using PyModule_New. The name is taken from
      <em>
       spec
      </em>
      .
     </p>
    </div>
    <div class="section" id="post-creation-steps">
     <h3>
      <a class="toc-backref" href="#id18">
       Post-creation steps
      </a>
     </h3>
     <p>
      If the Py_mod_create function returns an instance of types.ModuleType
or a subclass (or if a Py_mod_create slot is not present), the import
machinery will associate the PyModuleDef with the module.
This also makes the PyModuleDef accessible to execution phase, the
PyModule_GetDef function, and garbage collection routines (traverse,
clear, free).
     </p>
     <p>
      If the Py_mod_create function does not return a module subclass, then m_size
must be 0, and m_traverse, m_clear and m_free must all be NULL.
Otherwise, SystemError is raised.
     </p>
     <p>
      Additionally, initial attributes specified in the PyModuleDef are set on the
module object, regardless of its type:
     </p>
     <ul class="simple">
      <li>
       The docstring is set from m_doc, if non-NULL.
      </li>
      <li>
       The module's functions are initialized from m_methods, if any.
      </li>
     </ul>
    </div>
   </div>
   <div class="section" id="module-execution-phase">
    <h2>
     <a class="toc-backref" href="#id19">
      Module Execution Phase
     </a>
    </h2>
    <p>
     Module execution -- that is, the implementation of
ExecutionLoader.exec_module -- is governed by "execution slots".
This PEP only adds one, Py_mod_exec, but others may be added in the future.
    </p>
    <p>
     The execution phase is done on the PyModuleDef associated with the module
object. For objects that are not a subclass of PyModule_Type (for which
PyModule_GetDef would fail), the execution phase is skipped.
    </p>
    <p>
     Execution slots may be specified multiple times, and are processed in the order
they appear in the slots array.
When using the default import machinery, they are processed after
import-related attributes specified in
     <a class="reference external" href="../pep-0451/index.html">
      PEP 451
     </a>
     <a class="footnote-reference" href="#pep-0451-attributes" id="id3">
      [1]
     </a>
     (such as
     <tt class="docutils literal">
      __name__
     </tt>
     or
     <tt class="docutils literal">
      __loader__
     </tt>
     ) are set and the module is added
to sys.modules.
    </p>
    <div class="section" id="pre-execution-steps">
     <h3>
      <a class="toc-backref" href="#id20">
       Pre-Execution steps
      </a>
     </h3>
     <p>
      Before processing the execution slots, per-module state is allocated for the
module. From this point on, per-module state is accessible through
PyModule_GetState.
     </p>
    </div>
    <div class="section" id="the-py-mod-exec-slot">
     <h3>
      <a class="toc-backref" href="#id21">
       The Py_mod_exec slot
      </a>
     </h3>
     <p>
      The entry in this slot must point to a function with the following signature:
     </p>
     <pre class="literal-block">
int (*PyModuleExecFunction)(PyObject* module)
</pre>
     <p>
      It will be called to initialize a module. Usually, this amounts to
setting the module's initial attributes.
The "module" argument receives the module object to initialize.
     </p>
     <p>
      The function must return
      <tt class="docutils literal">
       0
      </tt>
      on success, or, on error, set an exception and
return
      <tt class="docutils literal">
       <span class="pre">
        -1
       </span>
      </tt>
      .
     </p>
     <p>
      If PyModuleExec replaces the module's entry in sys.modules, the new object
will be used and returned by importlib machinery after all execution slots
are processed. This is a feature of the import machinery itself.
The slots themselves are all processed using the module returned from the
creation phase; sys.modules is not consulted during the execution phase.
(Note that for extension modules, implementing Py_mod_create is usually
a better solution for using custom module objects.)
     </p>
    </div>
   </div>
   <div class="section" id="legacy-init">
    <h2>
     <a class="toc-backref" href="#id22">
      Legacy Init
     </a>
    </h2>
    <p>
     The backwards-compatible single-phase initialization continues to be supported.
In this scheme, the PyInit function returns a fully initialized module rather
than a PyModuleDef object.
In this case, the PyInit hook implements the creation phase, and the execution
phase is a no-op.
    </p>
    <p>
     Modules that need to work unchanged on older versions of Python should stick to
single-phase initialization, because the benefits it brings can't be
back-ported.
Here is an example of a module that supports multi-phase initialization,
and falls back to single-phase when compiled for an older version of CPython.
It is included mainly as an illustration of the changes needed to enable
multi-phase init:
    </p>
    <pre class="literal-block">
#include &lt;Python.h&gt;

static int spam_exec(PyObject *module) {
    PyModule_AddStringConstant(module, "food", "spam");
    return 0;
}

#ifdef Py_mod_exec
static PyModuleDef_Slot spam_slots[] = {
    {Py_mod_exec, spam_exec},
    {0, NULL}
};
#endif

static PyModuleDef spam_def = {
    PyModuleDef_HEAD_INIT,                      /* m_base */
    "spam",                                     /* m_name */
    PyDoc_STR("Utilities for cooking spam"),    /* m_doc */
    0,                                          /* m_size */
    NULL,                                       /* m_methods */
#ifdef Py_mod_exec
    spam_slots,                                 /* m_slots */
#else
    NULL,
#endif
    NULL,                                       /* m_traverse */
    NULL,                                       /* m_clear */
    NULL,                                       /* m_free */
};

PyMODINIT_FUNC
PyInit_spam(void) {
#ifdef Py_mod_exec
    return PyModuleDef_Init(&amp;spam_def);
#else
    PyObject *module;
    module = PyModule_Create(&amp;spam_def);
    if (module == NULL) return NULL;
    if (spam_exec(module) != 0) {
        Py_DECREF(module);
        return NULL;
    }
    return module;
#endif
}
</pre>
   </div>
   <div class="section" id="built-in-modules">
    <h2>
     <a class="toc-backref" href="#id23">
      Built-In modules
     </a>
    </h2>
    <p>
     Any extension module can be used as a built-in module by linking it into
the executable, and including it in the inittab (either at runtime with
PyImport_AppendInittab, or at configuration time, using tools like
     <em>
      freeze
     </em>
     ).
    </p>
    <p>
     To keep this possibility, all changes to extension module loading introduced
in this PEP will also apply to built-in modules.
The only exception is non-ASCII module names, explained below.
    </p>
   </div>
   <div class="section" id="subinterpreters-and-interpreter-reloading">
    <h2>
     <a class="toc-backref" href="#id24">
      Subinterpreters and Interpreter Reloading
     </a>
    </h2>
    <p>
     Extensions using the new initialization scheme are expected to support
subinterpreters and multiple Py_Initialize/Py_Finalize cycles correctly,
avoiding the issues mentioned in Python documentation
     <a class="footnote-reference" href="#subinterpreter-docs" id="id4">
      [9]
     </a>
     .
The mechanism is designed to make this easy, but care is still required
on the part of the extension author.
No user-defined functions, methods, or instances may leak to different
interpreters.
To achieve this, all module-level state should be kept in either the module
dict, or in the module object's storage reachable by PyModule_GetState.
A simple rule of thumb is: Do not define any static data, except built-in types
with no mutable or user-settable class attributes.
    </p>
   </div>
   <div class="section" id="functions-incompatible-with-multi-phase-initialization">
    <h2>
     <a class="toc-backref" href="#id25">
      Functions incompatible with multi-phase initialization
     </a>
    </h2>
    <p>
     The PyModule_Create function will fail when used on a PyModuleDef structure
with a non-NULL
     <em>
      m_slots
     </em>
     pointer.
The function doesn't have access to the ModuleSpec object necessary for
multi-phase initialization.
    </p>
    <p>
     The PyState_FindModule function will return NULL, and PyState_AddModule
and PyState_RemoveModule will also fail on modules with non-NULL
     <em>
      m_slots
     </em>
     .
PyState registration is disabled because multiple module objects may be created
from the same PyModuleDef.
    </p>
   </div>
   <div class="section" id="module-state-and-c-level-callbacks">
    <h2>
     <a class="toc-backref" href="#id26">
      Module state and C-level callbacks
     </a>
    </h2>
    <p>
     Due to the unavailability of PyState_FindModule, any function that needs access
to module-level state (including functions, classes or exceptions defined at
the module level) must receive a reference to the module object (or the
particular object it needs), either directly or indirectly.
This is currently difficult in two situations:
    </p>
    <ul class="simple">
     <li>
      Methods of classes, which receive a reference to the class, but not to
the class's module
     </li>
     <li>
      Libraries with C-level callbacks, unless the callbacks can receive custom
data set at callback registration
     </li>
    </ul>
    <p>
     Fixing these cases is outside of the scope of this PEP, but will be needed for
the new mechanism to be useful to all modules. Proper fixes have been discussed
on the import-sig mailing list
     <a class="footnote-reference" href="#findmodule-discussion" id="id5">
      [7]
     </a>
     .
    </p>
    <p>
     As a rule of thumb, modules that rely on PyState_FindModule are, at the moment,
not good candidates for porting to the new mechanism.
    </p>
   </div>
   <div class="section" id="new-functions">
    <h2>
     <a class="toc-backref" href="#id27">
      New Functions
     </a>
    </h2>
    <p>
     A new function and macro implementing the module creation phase will be added.
These are similar to PyModule_Create and PyModule_Create2, except they
take an additional ModuleSpec argument, and handle module definitions with
non-NULL slots:
    </p>
    <pre class="literal-block">
PyObject * PyModule_FromDefAndSpec(PyModuleDef *def, PyObject *spec)
PyObject * PyModule_FromDefAndSpec2(PyModuleDef *def, PyObject *spec,
                                    int module_api_version)
</pre>
    <p>
     A new function implementing the module execution phase will be added.
This allocates per-module state (if not allocated already), and
     <em>
      always
     </em>
     processes execution slots. The import machinery calls this method when
a module is executed, unless the module is being reloaded:
    </p>
    <pre class="literal-block">
PyAPI_FUNC(int) PyModule_ExecDef(PyObject *module, PyModuleDef *def)
</pre>
    <p>
     Another function will be introduced to initialize a PyModuleDef object.
This idempotent function fills in the type, refcount, and module index.
It returns its argument cast to PyObject*, so it can be returned directly
from a PyInit function:
    </p>
    <pre class="literal-block">
PyObject * PyModuleDef_Init(PyModuleDef *);
</pre>
    <p>
     Additionally, two helpers will be added for setting the docstring and
methods on a module:
    </p>
    <pre class="literal-block">
int PyModule_SetDocString(PyObject *, const char *)
int PyModule_AddFunctions(PyObject *, PyMethodDef *)
</pre>
   </div>
   <div class="section" id="export-hook-name">
    <h2>
     <a class="toc-backref" href="#id28">
      Export Hook Name
     </a>
    </h2>
    <p>
     As portable C identifiers are limited to ASCII, module names
must be encoded to form the PyInit hook name.
    </p>
    <p>
     For ASCII module names, the import hook is named
PyInit_&lt;modulename&gt;, where &lt;modulename&gt; is the name of the module.
    </p>
    <p>
     For module names containing non-ASCII characters, the import hook is named
PyInitU_&lt;encodedname&gt;, where the name is encoded using CPython's
"punycode" encoding (Punycode
     <a class="footnote-reference" href="#rfc-3492" id="id6">
      [4]
     </a>
     with a lowercase suffix),
with hyphens ("-") replaced by underscores ("_").
    </p>
    <p>
     In Python:
    </p>
    <pre class="literal-block">
def export_hook_name(name):
    try:
        suffix = b'_' + name.encode('ascii')
    except UnicodeEncodeError:
        suffix = b'U_' + name.encode('punycode').replace(b'-', b'_')
    return b'PyInit' + suffix
</pre>
    <p>
     Examples:
    </p>
    <table border="1" class="docutils">
     <colgroup>
      <col width="41%">
      </col>
      <col width="59%">
      </col>
     </colgroup>
     <thead valign="bottom">
      <tr>
       <th class="head">
        Module name
       </th>
       <th class="head">
        Init hook name
       </th>
      </tr>
     </thead>
     <tbody valign="top">
      <tr>
       <td>
        spam
       </td>
       <td>
        PyInit_spam
       </td>
      </tr>
      <tr>
       <td>
        lančmít
       </td>
       <td>
        PyInitU_lanmt_2sa6t
       </td>
      </tr>
      <tr>
       <td>
        スパム
       </td>
       <td>
        PyInitU_zck5b2b
       </td>
      </tr>
     </tbody>
    </table>
    <p>
     For modules with non-ASCII names, single-phase initialization is not supported.
    </p>
    <p>
     In the initial implementation of this PEP, built-in modules with non-ASCII
names will not be supported.
    </p>
   </div>
   <div class="section" id="module-reloading">
    <h2>
     <a class="toc-backref" href="#id29">
      Module Reloading
     </a>
    </h2>
    <p>
     Reloading an extension module using importlib.reload() will continue to
have no effect, except re-setting import-related attributes.
    </p>
    <p>
     Due to limitations in shared library loading (both dlopen on POSIX and
LoadModuleEx on Windows), it is not generally possible to load
a modified library after it has changed on disk.
    </p>
    <p>
     Use cases for reloading other than trying out a new version of the module
are too rare to require all module authors to keep reloading in mind.
If reload-like functionality is needed, authors can export a dedicated
function for it.
    </p>
   </div>
   <div class="section" id="multiple-modules-in-one-library">
    <h2>
     <a class="toc-backref" href="#id30">
      Multiple modules in one library
     </a>
    </h2>
    <p>
     To support multiple Python modules in one shared library, the library can
export additional PyInit* symbols besides the one that corresponds
to the library's filename.
    </p>
    <p>
     Note that this mechanism can currently only be used to
     <em>
      load
     </em>
     extra modules,
but not to
     <em>
      find
     </em>
     them. (This is a limitation of the loader mechanism,
which this PEP does not try to modify.)
To work around the lack of a suitable finder, code like the following
can be used:
    </p>
    <pre class="literal-block">
import importlib.machinery
import importlib.util
loader = importlib.machinery.ExtensionFileLoader(name, path)
spec = importlib.util.spec_from_loader(name, loader)
module = importlib.util.module_from_spec(spec)
loader.exec_module(module)
return module
</pre>
    <p>
     On platforms that support symbolic links, these may be used to install one
library under multiple names, exposing all exported modules to normal
import machinery.
    </p>
   </div>
   <div class="section" id="testing-and-initial-implementations">
    <h2>
     <a class="toc-backref" href="#id31">
      Testing and initial implementations
     </a>
    </h2>
    <p>
     For testing, a new built-in module
     <tt class="docutils literal">
      _testmultiphase
     </tt>
     will be created.
The library will export several additional modules using the mechanism
described in "Multiple modules in one library".
    </p>
    <p>
     The
     <tt class="docutils literal">
      _testcapi
     </tt>
     module will be unchanged, and will use single-phase
initialization indefinitely (or until it is no longer supported).
    </p>
    <p>
     The
     <tt class="docutils literal">
      array
     </tt>
     and
     <tt class="docutils literal">
      xx*
     </tt>
     modules will be converted to use multi-phase
initialization as part of the initial implementation.
    </p>
   </div>
  </div>
  <div class="section" id="summary-of-api-changes-and-additions">
   <h1>
    <a class="toc-backref" href="#id32">
     Summary of API Changes and Additions
    </a>
   </h1>
   <p>
    New functions:
   </p>
   <ul class="simple">
    <li>
     PyModule_FromDefAndSpec (macro)
    </li>
    <li>
     PyModule_FromDefAndSpec2
    </li>
    <li>
     PyModule_ExecDef
    </li>
    <li>
     PyModule_SetDocString
    </li>
    <li>
     PyModule_AddFunctions
    </li>
    <li>
     PyModuleDef_Init
    </li>
   </ul>
   <p>
    New macros:
   </p>
   <ul class="simple">
    <li>
     Py_mod_create
    </li>
    <li>
     Py_mod_exec
    </li>
   </ul>
   <p>
    New types:
   </p>
   <ul class="simple">
    <li>
     PyModuleDef_Type will be exposed
    </li>
   </ul>
   <p>
    New structures:
   </p>
   <ul class="simple">
    <li>
     PyModuleDef_Slot
    </li>
   </ul>
   <p>
    Other changes:
   </p>
   <p>
    PyModuleDef.m_reload changes to PyModuleDef.m_slots.
   </p>
   <p>
    <tt class="docutils literal">
     BuiltinImporter
    </tt>
    and
    <tt class="docutils literal">
     ExtensionFileLoader
    </tt>
    will now implement
    <tt class="docutils literal">
     create_module
    </tt>
    and
    <tt class="docutils literal">
     exec_module
    </tt>
    .
   </p>
   <p>
    The internal
    <tt class="docutils literal">
     _imp
    </tt>
    module will have backwards incompatible changes:
    <tt class="docutils literal">
     create_builtin
    </tt>
    ,
    <tt class="docutils literal">
     create_dynamic
    </tt>
    , and
    <tt class="docutils literal">
     exec_dynamic
    </tt>
    will be added;
    <tt class="docutils literal">
     init_builtin
    </tt>
    ,
    <tt class="docutils literal">
     load_dynamic
    </tt>
    will be removed.
   </p>
   <p>
    The undocumented functions
    <tt class="docutils literal">
     imp.load_dynamic
    </tt>
    and
    <tt class="docutils literal">
     imp.init_builtin
    </tt>
    will
be replaced by backwards-compatible shims.
   </p>
   <div class="section" id="backwards-compatibility">
    <h2>
     <a class="toc-backref" href="#id33">
      Backwards Compatibility
     </a>
    </h2>
    <p>
     Existing modules will continue to be source- and binary-compatible with new
versions of Python.
Modules that use multi-phase initialization will not be compatible with
versions of Python that do not implement this PEP.
    </p>
    <p>
     The functions
     <tt class="docutils literal">
      init_builtin
     </tt>
     and
     <tt class="docutils literal">
      load_dynamic
     </tt>
     will be removed from
the
     <tt class="docutils literal">
      _imp
     </tt>
     module (but not from the
     <tt class="docutils literal">
      imp
     </tt>
     module).
    </p>
    <p>
     All changed loaders (
     <tt class="docutils literal">
      BuiltinImporter
     </tt>
     and
     <tt class="docutils literal">
      ExtensionFileLoader
     </tt>
     ) will
remain backwards-compatible; the
     <tt class="docutils literal">
      load_module
     </tt>
     method will be replaced by
a shim.
    </p>
    <p>
     Internal functions of Python/import.c and Python/importdl.c will be removed.
(Specifically, these are
     <tt class="docutils literal">
      _PyImport_GetDynLoadFunc
     </tt>
     ,
     <tt class="docutils literal">
      _PyImport_GetDynLoadWindows
     </tt>
     , and
     <tt class="docutils literal">
      _PyImport_LoadDynamicModule
     </tt>
     .)
    </p>
   </div>
  </div>
  <div class="section" id="possible-future-extensions">
   <h1>
    <a class="toc-backref" href="#id34">
     Possible Future Extensions
    </a>
   </h1>
   <p>
    The slots mechanism, inspired by PyType_Slot from
    <a class="reference external" href="../pep-0384/index.html">
     PEP 384
    </a>
    ,
allows later extensions.
   </p>
   <p>
    Some extension modules exports many constants; for example _ssl has
a long list of calls in the form:
   </p>
   <pre class="literal-block">
PyModule_AddIntConstant(m, "SSL_ERROR_ZERO_RETURN",
                        PY_SSL_ERROR_ZERO_RETURN);
</pre>
   <p>
    Converting this to a declarative list, similar to PyMethodDef,
would reduce boilerplate, and provide free error-checking which
is often missing.
   </p>
   <p>
    String constants and types can be handled similarly.
(Note that non-default bases for types cannot be portably specified
statically; this case would need a Py_mod_exec function that runs
before the slots are added. The free error-checking would still be
beneficial, though.)
   </p>
   <p>
    Another possibility is providing a "main" function that would be run
when the module is given to Python's -m switch.
For this to work, the runpy module will need to be modified to take
advantage of ModuleSpec-based loading introduced in
    <a class="reference external" href="../pep-0451/index.html">
     PEP 451
    </a>
    .
Also, it will be necessary to add a mechanism for setting up a module
according to slots it wasn't originally defined with.
   </p>
  </div>
  <div class="section" id="implementation">
   <h1>
    <a class="toc-backref" href="#id35">
     Implementation
    </a>
   </h1>
   <p>
    Work-in-progress implementation is available in a Github repository
    <a class="footnote-reference" href="#gh-repo" id="id7">
     [5]
    </a>
    ;
a patchset is at
    <a class="footnote-reference" href="#gh-patch" id="id8">
     [6]
    </a>
    .
   </p>
  </div>
  <div class="section" id="previous-approaches">
   <h1>
    <a class="toc-backref" href="#id36">
     Previous Approaches
    </a>
   </h1>
   <p>
    Stefan Behnel's initial proto-PEP
    <a class="footnote-reference" href="#stefans-protopep" id="id9">
     [2]
    </a>
    had a "PyInit_modulename" hook that would create a module class,
whose
    <tt class="docutils literal">
     __init__
    </tt>
    would be then called to create the module.
This proposal did not correspond to the (then nonexistent)
    <a class="reference external" href="../pep-0451/index.html">
     PEP 451
    </a>
    ,
where module creation and initialization is broken into distinct steps.
It also did not support loading an extension into pre-existing module objects.
   </p>
   <p>
    Nick Coghlan proposed "Create" and "Exec" hooks, and wrote a prototype
implementation
    <a class="footnote-reference" href="#nicks-prototype" id="id10">
     [3]
    </a>
    .
At this time
    <a class="reference external" href="../pep-0451/index.html">
     PEP 451
    </a>
    was still not implemented, so the prototype
does not use ModuleSpec.
   </p>
   <p>
    The original version of this PEP used Create and Exec hooks, and allowed
loading into arbitrary pre-constructed objects with Exec hook.
The proposal made extension module initialization closer to how Python modules
are initialized, but it was later recognized that this isn't an important goal.
The current PEP describes a simpler solution.
   </p>
   <p>
    A further iteration used a "PyModuleExport" hook as an alternative to PyInit,
where PyInit was used for existing scheme, and PyModuleExport for multi-phase.
However, not being able to determine the hook name based on module name
complicated automatic generation of PyImport_Inittab by tools like freeze.
Keeping only the PyInit hook name, even if it's not entirely appropriate for
exporting a definition, yielded a much simpler solution.
   </p>
  </div>
  <div class="section" id="references">
   <h1>
    <a class="toc-backref" href="#id37">
     References
    </a>
   </h1>
   <table class="docutils footnote" frame="void" id="pep-0451-attributes" rules="none">
    <colgroup>
     <col class="label">
     </col>
     <col>
     </col>
    </colgroup>
    <tbody valign="top">
     <tr>
      <td class="label">
       [1]
      </td>
      <td>
       <em>
        (
        <a class="fn-backref" href="#id2">
         1
        </a>
        ,
        <a class="fn-backref" href="#id3">
         2
        </a>
        )
       </em>
       <a class="reference external" href="../pep-0451/index.html#attributes">
        https://www.python.org/dev/peps/pep-0451/#attributes
       </a>
      </td>
     </tr>
    </tbody>
   </table>
   <table class="docutils footnote" frame="void" id="stefans-protopep" rules="none">
    <colgroup>
     <col class="label">
     </col>
     <col>
     </col>
    </colgroup>
    <tbody valign="top">
     <tr>
      <td class="label">
       <a class="fn-backref" href="#id9">
        [2]
       </a>
      </td>
      <td>
       <a class="reference external" href="https://mail.python.org/pipermail/python-dev/2013-August/128087.html">
        https://mail.python.org/pipermail/python-dev/2013-August/128087.html
       </a>
      </td>
     </tr>
    </tbody>
   </table>
   <table class="docutils footnote" frame="void" id="nicks-prototype" rules="none">
    <colgroup>
     <col class="label">
     </col>
     <col>
     </col>
    </colgroup>
    <tbody valign="top">
     <tr>
      <td class="label">
       <a class="fn-backref" href="#id10">
        [3]
       </a>
      </td>
      <td>
       <a class="reference external" href="https://mail.python.org/pipermail/python-dev/2013-August/128101.html">
        https://mail.python.org/pipermail/python-dev/2013-August/128101.html
       </a>
      </td>
     </tr>
    </tbody>
   </table>
   <table class="docutils footnote" frame="void" id="rfc-3492" rules="none">
    <colgroup>
     <col class="label">
     </col>
     <col>
     </col>
    </colgroup>
    <tbody valign="top">
     <tr>
      <td class="label">
       <a class="fn-backref" href="#id6">
        [4]
       </a>
      </td>
      <td>
       <a class="reference external" href="http://tools.ietf.org/html/rfc3492">
        http://tools.ietf.org/html/rfc3492
       </a>
      </td>
     </tr>
    </tbody>
   </table>
   <table class="docutils footnote" frame="void" id="gh-repo" rules="none">
    <colgroup>
     <col class="label">
     </col>
     <col>
     </col>
    </colgroup>
    <tbody valign="top">
     <tr>
      <td class="label">
       <a class="fn-backref" href="#id7">
        [5]
       </a>
      </td>
      <td>
       <a class="reference external" href="https://github.com/encukou/cpython/commits/pep489">
        https://github.com/encukou/cpython/commits/pep489
       </a>
      </td>
     </tr>
    </tbody>
   </table>
   <table class="docutils footnote" frame="void" id="gh-patch" rules="none">
    <colgroup>
     <col class="label">
     </col>
     <col>
     </col>
    </colgroup>
    <tbody valign="top">
     <tr>
      <td class="label">
       <a class="fn-backref" href="#id8">
        [6]
       </a>
      </td>
      <td>
       <a class="reference external" href="https://github.com/encukou/cpython/compare/master...encukou:pep489.patch">
        https://github.com/encukou/cpython/compare/master...encukou:pep489.patch
       </a>
      </td>
     </tr>
    </tbody>
   </table>
   <table class="docutils footnote" frame="void" id="findmodule-discussion" rules="none">
    <colgroup>
     <col class="label">
     </col>
     <col>
     </col>
    </colgroup>
    <tbody valign="top">
     <tr>
      <td class="label">
       <a class="fn-backref" href="#id5">
        [7]
       </a>
      </td>
      <td>
       <a class="reference external" href="https://mail.python.org/pipermail/import-sig/2015-April/000959.html">
        https://mail.python.org/pipermail/import-sig/2015-April/000959.html
       </a>
      </td>
     </tr>
    </tbody>
   </table>
   <table class="docutils footnote" frame="void" id="pep-0451-loading" rules="none">
    <colgroup>
     <col class="label">
     </col>
     <col>
     </col>
    </colgroup>
    <tbody valign="top">
     <tr>
      <td class="label">
       <a class="fn-backref" href="#id1">
        [8]
       </a>
      </td>
      <td>
       <a class="reference external" href="../pep-0451/index.html#how-loading-will-work">
        https://www.python.org/dev/peps/pep-0451/#how-loading-will-work
       </a>
       ]
      </td>
     </tr>
    </tbody>
   </table>
   <table class="docutils footnote" frame="void" id="subinterpreter-docs" rules="none">
    <colgroup>
     <col class="label">
     </col>
     <col>
     </col>
    </colgroup>
    <tbody valign="top">
     <tr>
      <td class="label">
       <a class="fn-backref" href="#id4">
        [9]
       </a>
      </td>
      <td>
       <a class="reference external" href="https://docs.python.org/3/c-api/init.html#sub-interpreter-support">
        https://docs.python.org/3/c-api/init.html#sub-interpreter-support
       </a>
      </td>
     </tr>
    </tbody>
   </table>
  </div>
  <div class="section" id="copyright">
   <h1>
    <a class="toc-backref" href="#id38">
     Copyright
    </a>
   </h1>
   <p>
    This document has been placed in the public domain.
   </p>
  </div>
 </body>

<!-- Mirrored from www.python.org/dev/peps/pep-0489/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 03 Sep 2015 04:35:04 GMT -->
</html>Source: <a href="https://hg.python.org/peps/file/tip/pep-0489.txt">https://hg.python.org/peps/file/tip/pep-0489.txt</a>

    </article>


                </section>

                


<aside class="left-sidebar" role="secondary">

    






    





        <div class="twitter-widget sidebar-widget">
        <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/ThePSF" data-widget-id="434113224703610882">Tweets by @ThePSF</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>

    <div class="psf-sidebar-widget sidebar-widget">
        <h3 class="widget-title">The PSF</h3>
<p>The Python Software Foundation is the organization behind Python. Become a member of the PSF and help advance the software and our mission. </p>

    </div>

</aside>



                
                


            </div><!-- end .container -->
        </div><!-- end #content .content-wrapper -->

        <!-- Footer and social media list -->
        <footer id="site-map" class="main-footer" role="contentinfo">
            <div class="main-footer-links">
                <div class="container">

                    
                    <a id="back-to-top-1" class="jump-link" href="#python-network"><span aria-hidden="true" class="icon-arrow-up"><span>&#9650;</span></span> Back to Top</a>

                    

<ul class="sitemap navigation menu do-not-print" role="tree" id="container">
    
    <li class="tier-1 element-1">
        <a href="https://www.python.org/about/" >About</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/about/apps/" title="">Applications</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/about/quotes/" title="">Quotes</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/about/gettingstarted/" title="">Getting Started</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/about/help/" title="">Help</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-2">
        <a href="https://www.python.org/downloads/" >Downloads</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/downloads/" title="">All releases</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/downloads/source/" title="">Source code</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/downloads/windows/" title="">Windows</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/downloads/mac-osx/" title="">Mac OS X</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/download/other/" title="">Other Platforms</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://docs.python.org/3/license.html" title="">License</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/download/alternatives" title="">Alternative Implementations</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-3">
        <a href="https://www.python.org/doc/" >Documentation</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/doc/" title="">Docs</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/doc/av" title="">Audio/Visual Talks</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://wiki.python.org/moin/BeginnersGuide" title="">Beginner&#39;s Guide</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://docs.python.org/devguide/" title="">Developer&#39;s Guide</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://docs.python.org/faq/" title="">FAQ</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="http://wiki.python.org/moin/Languages" title="">Non-English Docs</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="../index.html" title="">PEP Index</a></li>
    
        <li class="tier-2 element-8" role="treeitem"><a href="https://wiki.python.org/moin/PythonBooks" title="">Python Books</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-4">
        <a href="https://www.python.org/community/" >Community</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/community/diversity/" title="">Diversity</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/community/irc/" title="">IRC</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/community/lists/" title="">Mailing Lists</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/community/workshops/" title="">Python Conferences</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/community/sigs/" title="">Special Interest Groups</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://wiki.python.org/moin/" title="">Python Wiki</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/community/logos/" title="">Python Logo</a></li>
    
        <li class="tier-2 element-8" role="treeitem"><a href="https://www.python.org/community/merchandise/" title="">Merchandise</a></li>
    
        <li class="tier-2 element-9" role="treeitem"><a href="https://www.python.org/community/awards" title="">Community Awards</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-5">
        <a href="https://www.python.org/about/success/" title="success-stories">Success Stories</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/about/success/#arts" title="">Arts</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/about/success/#business" title="">Business</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/about/success/#education" title="">Education</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/about/success/#engineering" title="">Engineering</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/about/success/#government" title="">Government</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://www.python.org/about/success/#scientific" title="">Scientific</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/about/success/#software-development" title="">Software Development</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-6">
        <a href="https://www.python.org/blogs/" title="News from around the Python world">News</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/blogs/" title="Python Insider Blog Posts">Python News</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="http://planetpython.org/" title="Planet Python">Community News</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="http://pyfound.blogspot.com/" title="PSF Blog">PSF News</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="http://pycon.blogspot.com/" title="PyCon Blog">PyCon News</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-7">
        <a href="https://www.python.org/events/" >Events</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/events/python-events/" title="">Python Events</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/events/python-user-group/" title="">User Group Events</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/events/python-events/past/" title="">Python Events Archive</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/events/python-user-group/past/" title="">User Group Events Archive</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://wiki.python.org/moin/PythonEventsCalendar#Submitting_an_Event" title="">Submit an Event</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-8">
        <a href="https://www.python.org/dev/" >Contributing</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="http://docs.python.org/devguide/" title="">Developer&#39;s Guide</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="http://bugs.python.org/" title="">Issue Tracker</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://mail.python.org/mailman/listinfo/python-dev" title="">python-dev list</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="http://pythonmentors.com/" title="">Core Mentorship</a></li>
    
</ul>

        
    </li>
    
</ul>


                    <a id="back-to-top-2" class="jump-link" href="#python-network"><span aria-hidden="true" class="icon-arrow-up"><span>&#9650;</span></span> Back to Top</a>
                    

                </div><!-- end .container -->
            </div> <!-- end .main-footer-links -->

            <div class="site-base">
                <div class="container">
                    
                    <ul class="footer-links navigation menu do-not-print" role="tree">
                        <li class="tier-1 element-1"><a href="https://www.python.org/about/help/">Help &amp; <span class="say-no-more">General</span> Contact</a></li>
                        <li class="tier-1 element-2"><a href="https://www.python.org/community/diversity/">Diversity <span class="say-no-more">Initiatives</span></a></li>
                        <li class="tier-1 element-3"><a href="https://github.com/python/pythondotorg/issues">Submit Website Bug</a></li>
                        <!--<li class="tier-1 element-3"><a href="#"><span class="say-no-more">Website</span> Colophon</a></li>-->
                    </ul>

                    <div class="copyright">
                        <p><small>
                            <span class="pre">Copyright &copy;2001-2015.</span>
                            &nbsp;<span class="pre"><a href="https://www.python.org/psf-landing/">Python Software Foundation</a></span>
                            &nbsp;<span class="pre"><a href="https://www.python.org/about/legal/">Legal Statements</a></span>
                            &nbsp;<span class="pre"><a href="https://www.python.org/privacy/">Privacy Policy</a></span>
                        </small></p>
                    </div>

                </div><!-- end .container -->
            </div><!-- end .site-base -->

        </footer>

    </div><!-- end #touchnav-wrapper -->

    
    <script src="../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../../static/js/libs/jquery-1.8.2.min.js"><\/script>')</script>

    <script src="../../../static/js/libs/masonry.pkgd.min.js"></script>

    <script type="text/javascript" src="../../../static/js/main-min.js" charset="utf-8"></script>
    

    <!--[if lte IE 7]>
    <script type="text/javascript" src="/static/js/plugins/IE8-min.js" charset="utf-8"></script>
    
    
    <![endif]-->

    <!--[if lte IE 8]>
    <script type="text/javascript" src="/static/js/plugins/getComputedStyle-min.js" charset="utf-8"></script>
    
    
    <![endif]-->

    

    
    

</body>
</html>

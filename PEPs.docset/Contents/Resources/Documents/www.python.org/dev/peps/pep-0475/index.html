<!doctype html>
<!--[if lt IE 7]>   <html class="no-js ie6 lt-ie7 lt-ie8 lt-ie9">   <![endif]-->
<!--[if IE 7]>      <html class="no-js ie7 lt-ie8 lt-ie9">          <![endif]-->
<!--[if IE 8]>      <html class="no-js ie8 lt-ie9">                 <![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en" dir="ltr">  <!--<![endif]-->


<!-- Mirrored from www.python.org/dev/peps/pep-0475/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 03 Sep 2015 04:34:55 GMT -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="prefetch" href="../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">

    <meta name="application-name" content="Python.org">
    <meta name="msapplication-tooltip" content="The official home of the Python Programming Language">
    <meta name="apple-mobile-web-app-title" content="Python.org">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="HandheldFriendly" content="True">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="cleartype" content="on">
    <meta http-equiv="imagetoolbar" content="false">

    <script src="../../../static/js/libs/modernizr.js"></script>

    <link href="../../../static/stylesheets/style.css" rel="stylesheet" type="text/css" title="default" />
    <link href="../../../static/stylesheets/mq.css" rel="stylesheet" type="text/css" media="not print, braille, embossed, speech, tty" />
    

    <!--[if (lte IE 8)&(!IEMobile)]>
    <link href="/static/stylesheets/no-mq.css" rel="stylesheet" type="text/css" media="screen" />
    
    
    <![endif]-->

    
    <link rel="icon" type="image/x-icon" href="https://www.python.org/static/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../static/apple-touch-icon-144x144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../static/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../static/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../../../static/apple-touch-icon-precomposed.png">
    <link rel="apple-touch-icon" href="../../../static/apple-touch-icon-precomposed.png">

    
    <meta name="msapplication-TileImage" content="/static/metro-icon-144x144-precomposed.png"><!-- white shape -->
    <meta name="msapplication-TileColor" content="#3673a5"><!-- python blue -->
    <meta name="msapplication-navbutton-color" content="#3673a5">

    <meta property="og:site_name" content="Python.org">
    <meta property="og:type" content="website">

    <title>PEP 0475 -- Retry system calls failing with EINTR | Python.org</title>
    <meta property="og:title" content="Welcome to Python.org">

    
    <meta name="description" content="The official home of the Python Programming Language">
    <meta name="og:description" content="The official home of the Python Programming Language">
    <meta name="keywords" content="Python programming language object oriented web free open source software license documentation download community">
    <meta property="og:tag" content="Python programming language object oriented web free open source software license documentation download community">
    <meta property="og:published_time" content="">
    <meta property="og:modified_time" content="">
    <meta property="og:author" content="">
    <meta property="og:section" content=""> 
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <meta property="og:video" content="">

    <link rel="author" href="https://www.python.org/static/humans.txt">

    

    
    <script type="application/ld+json">
     {
       "@context": "http://schema.org",
       "@type": "WebSite",
       "url": "https://www.python.org/",
       "potentialAction": {
         "@type": "SearchAction",
         "target": "https://www.python.org/search/?q={search_term_string}",
         "query-input": "required name=search_term_string"
       }
     }
    </script>

    
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39055973-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
    
</head>

<body class="python pages pep-page">

    <div id="touchnav-wrapper">

        <div id="nojs" class="do-not-print">
            <p><strong>Notice:</strong> While Javascript is not essential for this website, your interaction with the content will be limited. Please turn Javascript on for the full experience. </p>
        </div>

        <!--[if lt IE 8]>
        <div id="oldie-warning" class="do-not-print">
            <p><strong>Notice:</strong> Your browser is <em>ancient</em> and <a href="http://www.ie6countdown.com/">Microsoft agrees</a>. <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience a better web.</p>
        </div>
        <![endif]-->

        <!-- Sister Site Links -->
        <div id="top" class="top-bar do-not-print">

            <nav class="meta-navigation container" role="navigation">

                
                <div class="skip-link screen-reader-text">
                    <a href="#content" title="Skip to content">Skip to content</a>
                </div>

                
                <a id="close-python-network" class="jump-link" href="#python-network" aria-hidden="true">
                    <span aria-hidden="true" class="icon-arrow-down"><span>&#9660;</span></span> Close
                </a>

                

<ul class="menu" role="tree">
    
    <li class="python-meta ">
        <a href="https://www.python.org/" title="The Python Programming Language" >Python</a>
    </li>
    
    <li class="psf-meta ">
        <a href="https://www.python.org/psf-landing/" title="The Python Software Foundation" >PSF</a>
    </li>
    
    <li class="docs-meta ">
        <a href="https://docs.python.org/" title="Python Documentation" >Docs</a>
    </li>
    
    <li class="pypi-meta ">
        <a href="https://pypi.python.org/" title="Python Package Index" >PyPI</a>
    </li>
    
    <li class="jobs-meta ">
        <a href="https://www.python.org/jobs/" title="Python Job Board" >Jobs</a>
    </li>
    
    <li class="shop-meta ">
        <a href="https://www.python.org/community/" title="Python Community" >Community</a>
    </li>
    
</ul>


                <a id="python-network" class="jump-link" href="#top" aria-hidden="true">
                    <span aria-hidden="true" class="icon-arrow-up"><span>&#9650;</span></span> The Python Network
                </a>

            </nav>

        </div>

        <!-- Header elements -->
        <header class="main-header" role="banner">
            <div class="container">

                <h1 class="site-headline">
                    <a href="https://www.python.org/"><img class="python-logo" src="../../../static/img/python-logo.png" alt="python&trade;"></a>
                </h1>

                <div class="options-bar do-not-print">

                    
                    <a id="site-map-link" class="jump-to-menu" href="#site-map"><span class="menu-icon">&equiv;</span> Menu</a><form class="search-the-site" action="https://www.python.org/search/" method="get">
                        <fieldset title="Search Python.org">

                            <span aria-hidden="true" class="icon-search"></span>

                            <label class="screen-reader-text" for="id-search-field">Search This Site</label>
                            <input id="id-search-field" name="q" type="search" role="textbox" class="search-field" placeholder="Search" value="" tabindex="1">

                            <button type="submit" name="submit" id="submit" class="search-button" title="Submit this Search" tabindex="3">
                                GO
                            </button>

                            
                            <!--[if IE]><input type="text" style="display: none;" disabled="disabled" size="1" tabindex="4"><![endif]-->

                        </fieldset>
                    </form><span class="breaker"></span><div class="adjust-font-size" aria-hidden="true">
                        <ul class="navigation menu" aria-label="Adjust Text Size on Page">
                            <li class="tier-1 last" aria-haspopup="true">
                                <a href="#" class="action-trigger"><strong><small>A</small> A</strong></a>
                                <ul class="subnav menu">
                                    <li class="tier-2 element-1" role="treeitem"><a class="text-shrink" title="Make Text Smaller" href="javascript:;">Smaller</a></li>
                                    <li class="tier-2 element-2" role="treeitem"><a class="text-grow" title="Make Text Larger" href="javascript:;">Larger</a></li>
                                    <li class="tier-2 element-3" role="treeitem"><a class="text-reset" title="Reset any font size changes I have made" href="javascript:;">Reset</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div><div class="winkwink-nudgenudge">
                        <ul class="navigation menu" aria-label="Social Media Navigation">
                            <li class="tier-1 last" aria-haspopup="true">
                                <a href="#" class="action-trigger">Socialize</a>
                                <ul class="subnav menu">
                                    <li class="tier-2 element-1" role="treeitem"><a href="http://plus.google.com/+Python"><span aria-hidden="true" class="icon-google-plus"></span>Google+</a></li>
                                    <li class="tier-2 element-2" role="treeitem"><a href="http://www.facebook.com/pythonlang?fref=ts"><span aria-hidden="true" class="icon-facebook"></span>Facebook</a></li>
                                    <li class="tier-2 element-3" role="treeitem"><a href="http://twitter.com/ThePSF"><span aria-hidden="true" class="icon-twitter"></span>Twitter</a></li>
                                    <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/community/irc/"><span aria-hidden="true" class="icon-freenode"></span>Chat on IRC</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div><div class="account-signin">
                        <ul class="navigation menu" aria-label="Social Media Navigation">
                            <li class="tier-1 last" aria-haspopup="true">
                                
                                <a href="https://www.python.org/accounts/login/" title="Sign Up or Sign In to Python.org">Sign In</a>
                                <ul class="subnav menu">
                                    <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/accounts/signup/">Sign Up / Register</a></li>
                                    <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/accounts/login/">Sign In</a></li>
                                </ul>
                                
                            </li>
                        </ul>
                    </div>

                </div><!-- end options-bar -->

                <nav id="mainnav" class="python-navigation main-navigation do-not-print" role="navigation">
                    
                        
<ul class="navigation menu" role="menubar" aria-label="Main Navigation">
  
    
    
    <li id="about" class="tier-1 element-1  " aria-haspopup="true">
        <a href="https://www.python.org/about/" title="" class="">About</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/about/apps/" title="">Applications</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/about/quotes/" title="">Quotes</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/about/gettingstarted/" title="">Getting Started</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/about/help/" title="">Help</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="downloads" class="tier-1 element-2  " aria-haspopup="true">
        <a href="https://www.python.org/downloads/" title="" class="">Downloads</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/downloads/" title="">All releases</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/downloads/source/" title="">Source code</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/downloads/windows/" title="">Windows</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/downloads/mac-osx/" title="">Mac OS X</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/download/other/" title="">Other Platforms</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://docs.python.org/3/license.html" title="">License</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/download/alternatives" title="">Alternative Implementations</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="documentation" class="tier-1 element-3  " aria-haspopup="true">
        <a href="https://www.python.org/doc/" title="" class="">Documentation</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/doc/" title="">Docs</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/doc/av" title="">Audio/Visual Talks</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://wiki.python.org/moin/BeginnersGuide" title="">Beginner&#39;s Guide</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://docs.python.org/devguide/" title="">Developer&#39;s Guide</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://docs.python.org/faq/" title="">FAQ</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="http://wiki.python.org/moin/Languages" title="">Non-English Docs</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="../index.html" title="">PEP Index</a></li>
    
        <li class="tier-2 element-8" role="treeitem"><a href="https://wiki.python.org/moin/PythonBooks" title="">Python Books</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="community" class="tier-1 element-4  " aria-haspopup="true">
        <a href="https://www.python.org/community/" title="" class="">Community</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/community/diversity/" title="">Diversity</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/community/irc/" title="">IRC</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/community/lists/" title="">Mailing Lists</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/community/workshops/" title="">Python Conferences</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/community/sigs/" title="">Special Interest Groups</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://wiki.python.org/moin/" title="">Python Wiki</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/community/logos/" title="">Python Logo</a></li>
    
        <li class="tier-2 element-8" role="treeitem"><a href="https://www.python.org/community/merchandise/" title="">Merchandise</a></li>
    
        <li class="tier-2 element-9" role="treeitem"><a href="https://www.python.org/community/awards" title="">Community Awards</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="success-stories" class="tier-1 element-5  " aria-haspopup="true">
        <a href="https://www.python.org/about/success/" title="success-stories" class="">Success Stories</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/about/success/#arts" title="">Arts</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/about/success/#business" title="">Business</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/about/success/#education" title="">Education</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/about/success/#engineering" title="">Engineering</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/about/success/#government" title="">Government</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://www.python.org/about/success/#scientific" title="">Scientific</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/about/success/#software-development" title="">Software Development</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="news" class="tier-1 element-6  " aria-haspopup="true">
        <a href="https://www.python.org/blogs/" title="News from around the Python world" class="">News</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/blogs/" title="Python Insider Blog Posts">Python News</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="http://planetpython.org/" title="Planet Python">Community News</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="http://pyfound.blogspot.com/" title="PSF Blog">PSF News</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="http://pycon.blogspot.com/" title="PyCon Blog">PyCon News</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="events" class="tier-1 element-7  " aria-haspopup="true">
        <a href="https://www.python.org/events/" title="" class="">Events</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/events/python-events/" title="">Python Events</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/events/python-user-group/" title="">User Group Events</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/events/python-events/past/" title="">Python Events Archive</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/events/python-user-group/past/" title="">User Group Events Archive</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://wiki.python.org/moin/PythonEventsCalendar#Submitting_an_Event" title="">Submit an Event</a></li>
    
</ul>

        
    </li>
    
    
    
    
  
</ul>

                    
                </nav>

                <div class="header-banner "> <!-- for optional "do-not-print" class -->
                    
                    
                </div>

                
                

             </div><!-- end .container -->
        </header>

        <div id="content" class="content-wrapper">
            <!-- Main Content Column -->
            <div class="container">

                <section class="main-content with-left-sidebar" role="main">

                    
<ul class="breadcrumbs menu">
    <li>
        <a href="https://www.python.org/" title="The Python Programming Language">Python</a><span class="prompt">&gt;&gt;&gt;</span>
    </li>
    <li>
        <a href="https://www.python.org/dev/">Python Developer's Guide</a><span class="prompt">&gt;&gt;&gt;</span>
    </li>
    <li>
        <a href="../index.html">PEP Index</a><span class="prompt">&gt;&gt;&gt;</span>
    </li>
    <li>PEP 0475 -- Retry system calls failing with EINTR</li>
</ul>


                    
<style>
   .pep-page pre {
        padding: .5em;
        background: inherit;
        border-left: 0px;
        -webkit-box-shadow: 0 0 0 0;
        -moz-box-shadow: 0 0 0 0;
        box-shadow: 0 0 0 0;
   }
</style>

    
    <article class="text">
        

        <header class="article-header">
            <h1 class="page-title">PEP 0475 -- Retry system calls failing with EINTR</h1>
        </header>

        <!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<html>
 <body>
  <table class="rfc2822 docutils field-list" frame="void" rules="none">
   <col class="field-name">
   </col>
   <col class="field-body">
   </col>
   <tbody valign="top">
    <tr class="field">
     <th class="field-name">
      PEP:
     </th>
     <td class="field-body">
      475
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Title:
     </th>
     <td class="field-body">
      Retry system calls failing with EINTR
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Author:
     </th>
     <td class="field-body">
      Charles-François Natali &lt;cf.natali at gmail.com&gt;, Victor Stinner &lt;victor.stinner at gmail.com&gt;
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      BDFL-Delegate:
     </th>
     <td class="field-body">
      Antoine Pitrou &lt;
      <a class="reference external" href="mailto:solipsis@pitrou.net">
       solipsis@pitrou.net
      </a>
      &gt;
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Status:
     </th>
     <td class="field-body">
      Final
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Type:
     </th>
     <td class="field-body">
      Standards Track
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Created:
     </th>
     <td class="field-body">
      29-July-2014
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Python-Version:
     </th>
     <td class="field-body">
      3.5
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Resolution:
     </th>
     <td class="field-body">
      <a class="reference external" href="https://mail.python.org/pipermail/python-dev/2015-February/138018.html">
       https://mail.python.org/pipermail/python-dev/2015-February/138018.html
      </a>
     </td>
    </tr>
   </tbody>
  </table>
  <hr/>
  <div class="contents topic" id="contents">
   <p class="topic-title first">
    Contents
   </p>
   <ul class="simple">
    <li>
     <a class="reference internal" href="#abstract" id="id3">
      Abstract
     </a>
    </li>
    <li>
     <a class="reference internal" href="#rationale" id="id4">
      Rationale
     </a>
     <ul>
      <li>
       <a class="reference internal" href="#interrupted-system-calls" id="id5">
        Interrupted system calls
       </a>
      </li>
      <li>
       <a class="reference internal" href="#status-in-python-3-4" id="id6">
        Status in Python 3.4
       </a>
      </li>
      <li>
       <a class="reference internal" href="#use-case-1-don-t-bother-with-signals" id="id7">
        Use Case 1: Don't Bother With Signals
       </a>
      </li>
      <li>
       <a class="reference internal" href="#use-case-2-be-notified-of-signals-as-soon-as-possible" id="id8">
        Use Case 2: Be notified of signals as soon as possible
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a class="reference internal" href="#proposal" id="id9">
      Proposal
     </a>
     <ul>
      <li>
       <a class="reference internal" href="#modified-functions" id="id10">
        Modified functions
       </a>
      </li>
      <li>
       <a class="reference internal" href="#interruptederror-handling" id="id11">
        InterruptedError handling
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a class="reference internal" href="#backward-compatibility" id="id12">
      Backward compatibility
     </a>
    </li>
    <li>
     <a class="reference internal" href="#appendix" id="id13">
      Appendix
     </a>
     <ul>
      <li>
       <a class="reference internal" href="#wakeup-file-descriptor" id="id14">
        Wakeup file descriptor
       </a>
      </li>
      <li>
       <a class="reference internal" href="#multithreading" id="id15">
        Multithreading
       </a>
      </li>
      <li>
       <a class="reference internal" href="#signals-on-windows" id="id16">
        Signals on Windows
       </a>
       <ul>
        <li>
         <a class="reference internal" href="#control-events" id="id17">
          Control events
         </a>
        </li>
        <li>
         <a class="reference internal" href="#signals" id="id18">
          Signals
         </a>
        </li>
        <li>
         <a class="reference internal" href="#sigint" id="id19">
          SIGINT
         </a>
        </li>
       </ul>
      </li>
      <li>
       <a class="reference internal" href="#links" id="id20">
        Links
       </a>
       <ul>
        <li>
         <a class="reference internal" href="#misc" id="id21">
          Misc
         </a>
        </li>
        <li>
         <a class="reference internal" href="#python-issues-related-to-eintr" id="id22">
          Python issues related to EINTR
         </a>
        </li>
        <li>
         <a class="reference internal" href="#python-issues-related-to-signals" id="id23">
          Python issues related to signals
         </a>
        </li>
       </ul>
      </li>
     </ul>
    </li>
    <li>
     <a class="reference internal" href="#implementation" id="id24">
      Implementation
     </a>
    </li>
    <li>
     <a class="reference internal" href="#copyright" id="id25">
      Copyright
     </a>
    </li>
   </ul>
  </div>
  <div class="section" id="abstract">
   <h1>
    <a class="toc-backref" href="#id3">
     Abstract
    </a>
   </h1>
   <p>
    System call wrappers provided in the standard library should be retried
automatically when they fail with
    <tt class="docutils literal">
     EINTR
    </tt>
    , to relieve application code
from the burden of doing so.
   </p>
   <p>
    By system calls, we mean the functions exposed by the standard C library
pertaining to I/O or handling of other system resources.
   </p>
  </div>
  <div class="section" id="rationale">
   <h1>
    <a class="toc-backref" href="#id4">
     Rationale
    </a>
   </h1>
   <div class="section" id="interrupted-system-calls">
    <h2>
     <a class="toc-backref" href="#id5">
      Interrupted system calls
     </a>
    </h2>
    <p>
     On POSIX systems, signals are common.  Code calling system calls must be
prepared to handle them.  Examples of signals:
    </p>
    <ul class="simple">
     <li>
      The most common signal is
      <tt class="docutils literal">
       SIGINT
      </tt>
      , the signal sent when CTRL+c is
pressed. By default, Python raises a
      <tt class="docutils literal">
       KeyboardInterrupt
      </tt>
      exception
when this signal is received.
     </li>
     <li>
      When running subprocesses, the
      <tt class="docutils literal">
       SIGCHLD
      </tt>
      signal is sent when a
child process exits.
     </li>
     <li>
      Resizing the terminal sends the
      <tt class="docutils literal">
       SIGWINCH
      </tt>
      signal to the
applications running in the terminal.
     </li>
     <li>
      Putting the application in background (ex: press CTRL-z and then
type the
      <tt class="docutils literal">
       bg
      </tt>
      command) sends the
      <tt class="docutils literal">
       SIGCONT
      </tt>
      signal.
     </li>
    </ul>
    <p>
     Writing a C signal handler is difficult: only "async-signal-safe"
functions can be called (for example,
     <tt class="docutils literal">
      printf()
     </tt>
     and
     <tt class="docutils literal">
      malloc()
     </tt>
     are not async-signal safe), and there are issues with reentrancy.
Therefore, when a signal is received by a process during the execution
of a system call, the system call can fail with the
     <tt class="docutils literal">
      EINTR
     </tt>
     error to
give the program an opportunity to handle the signal without the
restriction on signal-safe functions.
    </p>
    <p>
     This behaviour is system-dependent: on certain systems, using the
     <tt class="docutils literal">
      SA_RESTART
     </tt>
     flag, some system calls are retried automatically instead
of failing with
     <tt class="docutils literal">
      EINTR
     </tt>
     .  Regardless, Python's
     <tt class="docutils literal">
      signal.signal()
     </tt>
     function clears the
     <tt class="docutils literal">
      SA_RESTART
     </tt>
     flag when setting the signal handler:
all system calls will probably fail with
     <tt class="docutils literal">
      EINTR
     </tt>
     in Python.
    </p>
    <p>
     Since receiving a signal is a non-exceptional occurrence, robust POSIX code
must be prepared to handle
     <tt class="docutils literal">
      EINTR
     </tt>
     (which, in most cases, means
retry in a loop in the hope that the call eventually succeeds).
Without special support from Python, this can make application code
much more verbose than it needs to be.
    </p>
   </div>
   <div class="section" id="status-in-python-3-4">
    <h2>
     <a class="toc-backref" href="#id6">
      Status in Python 3.4
     </a>
    </h2>
    <p>
     In Python 3.4, handling the
     <tt class="docutils literal">
      InterruptedError
     </tt>
     exception (
     <tt class="docutils literal">
      EINTR
     </tt>
     's
dedicated exception class) is duplicated at every call site on a case by
case basis.  Only a few Python modules actually handle this exception,
and fixes usually took several years to cover a whole module.  Example of
code retrying
     <tt class="docutils literal">
      file.read()
     </tt>
     on
     <tt class="docutils literal">
      InterruptedError
     </tt>
     :
    </p>
    <pre class="literal-block">
while True:
    try:
        data = file.read(size)
        break
    except InterruptedError:
        continue
</pre>
    <p>
     List of Python modules in the standard library which handle
     <tt class="docutils literal">
      InterruptedError
     </tt>
     :
    </p>
    <ul class="simple">
     <li>
      <tt class="docutils literal">
       asyncio
      </tt>
     </li>
     <li>
      <tt class="docutils literal">
       asyncore
      </tt>
     </li>
     <li>
      <tt class="docutils literal">
       io
      </tt>
      ,
      <tt class="docutils literal">
       _pyio
      </tt>
     </li>
     <li>
      <tt class="docutils literal">
       multiprocessing
      </tt>
     </li>
     <li>
      <tt class="docutils literal">
       selectors
      </tt>
     </li>
     <li>
      <tt class="docutils literal">
       socket
      </tt>
     </li>
     <li>
      <tt class="docutils literal">
       socketserver
      </tt>
     </li>
     <li>
      <tt class="docutils literal">
       subprocess
      </tt>
     </li>
    </ul>
    <p>
     Other programming languages like Perl, Java and Go retry system calls
failing with
     <tt class="docutils literal">
      EINTR
     </tt>
     at a lower level, so that libraries and applications
needn't bother.
    </p>
   </div>
   <div class="section" id="use-case-1-don-t-bother-with-signals">
    <h2>
     <a class="toc-backref" href="#id7">
      Use Case 1: Don't Bother With Signals
     </a>
    </h2>
    <p>
     In most cases, you don't want to be interrupted by signals and you
don't expect to get
     <tt class="docutils literal">
      InterruptedError
     </tt>
     exceptions.  For example, do
you really want to write such complex code for a "Hello World"
example?
    </p>
    <pre class="literal-block">
while True:
    try:
        print("Hello World")
        break
    except InterruptedError:
        continue
</pre>
    <p>
     <tt class="docutils literal">
      InterruptedError
     </tt>
     can happen in unexpected places. For example,
     <tt class="docutils literal">
      os.close()
     </tt>
     and
     <tt class="docutils literal">
      FileIO.close()
     </tt>
     may raise
     <tt class="docutils literal">
      InterruptedError
     </tt>
     :
see the article
     <a class="reference external" href="http://alobbs.com/post/54503240599/close-and-eintr">
      close() and EINTR
     </a>
     .
    </p>
    <p>
     The
     <a class="reference internal" href="#python-issues-related-to-eintr">
      Python issues related to EINTR
     </a>
     section below gives examples of
bugs caused by
     <tt class="docutils literal">
      EINTR
     </tt>
     .
    </p>
    <p>
     The expectation in this use case is that Python hides the
     <tt class="docutils literal">
      InterruptedError
     </tt>
     and retries system calls automatically.
    </p>
   </div>
   <div class="section" id="use-case-2-be-notified-of-signals-as-soon-as-possible">
    <h2>
     <a class="toc-backref" href="#id8">
      Use Case 2: Be notified of signals as soon as possible
     </a>
    </h2>
    <p>
     Sometimes yet, you expect some signals and you want to handle them as
soon as possible.  For example, you may want to immediately quit a
program using the
     <tt class="docutils literal">
      CTRL+c
     </tt>
     keyboard shortcut.
    </p>
    <p>
     Besides, some signals are not interesting and should not disrupt the
application.  There are two options to interrupt an application on
only
     <em>
      some
     </em>
     signals:
    </p>
    <ul class="simple">
     <li>
      Set up a custom signal signal handler which raises an exception, such as
      <tt class="docutils literal">
       KeyboardInterrupt
      </tt>
      for
      <tt class="docutils literal">
       SIGINT
      </tt>
      .
     </li>
     <li>
      Use a I/O multiplexing function like
      <tt class="docutils literal">
       select()
      </tt>
      together with Python's
signal wakeup file descriptor: see the function
      <tt class="docutils literal">
       signal.set_wakeup_fd()
      </tt>
      .
     </li>
    </ul>
    <p>
     The expectation in this use case is for the Python signal handler to be
executed timely, and the system call to fail if the handler raised an
exception -- otherwise restart.
    </p>
   </div>
  </div>
  <div class="section" id="proposal">
   <h1>
    <a class="toc-backref" href="#id9">
     Proposal
    </a>
   </h1>
   <p>
    This PEP proposes to handle EINTR and retries at the lowest level, i.e.
in the wrappers provided by the stdlib (as opposed to higher-level
libraries and applications).
   </p>
   <p>
    Specifically, when a system call fails with
    <tt class="docutils literal">
     EINTR
    </tt>
    , its Python wrapper
must call the given signal handler (using
    <tt class="docutils literal">
     PyErr_CheckSignals()
    </tt>
    ).
If the signal handler raises an exception, the Python wrapper bails out
and fails with the exception.
   </p>
   <p>
    If the signal handler returns successfully, the Python wrapper retries the
system call automatically.  If the system call involves a timeout parameter,
the timeout is recomputed.
   </p>
   <div class="section" id="modified-functions">
    <h2>
     <a class="toc-backref" href="#id10">
      Modified functions
     </a>
    </h2>
    <p>
     Example of standard library functions that need to be modified to comply
with this PEP:
    </p>
    <ul class="simple">
     <li>
      <tt class="docutils literal">
       open()
      </tt>
      ,
      <tt class="docutils literal">
       os.open()
      </tt>
      ,
      <tt class="docutils literal">
       io.open()
      </tt>
     </li>
     <li>
      functions of the
      <tt class="docutils literal">
       faulthandler
      </tt>
      module
     </li>
     <li>
      <tt class="docutils literal">
       os
      </tt>
      functions:
      <ul>
       <li>
        <tt class="docutils literal">
         os.fchdir()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.fchmod()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.fchown()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.fdatasync()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.fstat()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.fstatvfs()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.fsync()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.ftruncate()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.mkfifo()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.mknod()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.posix_fadvise()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.posix_fallocate()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.pread()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.pwrite()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.read()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.readv()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.sendfile()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.wait3()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.wait4()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.wait()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.waitid()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.waitpid()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.write()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         os.writev()
        </tt>
       </li>
       <li>
        special cases:
        <tt class="docutils literal">
         os.close()
        </tt>
        and
        <tt class="docutils literal">
         os.dup2()
        </tt>
        now ignore
        <tt class="docutils literal">
         EINTR
        </tt>
        error,
the syscall is not retried
       </li>
      </ul>
     </li>
     <li>
      <tt class="docutils literal">
       select.select()
      </tt>
      ,
      <tt class="docutils literal">
       select.poll.poll()
      </tt>
      ,
      <tt class="docutils literal">
       select.epoll.poll()
      </tt>
      ,
      <tt class="docutils literal">
       select.kqueue.control()
      </tt>
      ,
      <tt class="docutils literal">
       select.devpoll.poll()
      </tt>
     </li>
     <li>
      <tt class="docutils literal">
       socket.socket()
      </tt>
      methods:
      <ul>
       <li>
        <tt class="docutils literal">
         accept()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         connect()
        </tt>
        (except for non-blocking sockets)
       </li>
       <li>
        <tt class="docutils literal">
         recv()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         recvfrom()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         recvmsg()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         send()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         sendall()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         sendmsg()
        </tt>
       </li>
       <li>
        <tt class="docutils literal">
         sendto()
        </tt>
       </li>
      </ul>
     </li>
     <li>
      <tt class="docutils literal">
       signal.sigtimedwait()
      </tt>
      ,
      <tt class="docutils literal">
       signal.sigwaitinfo()
      </tt>
     </li>
     <li>
      <tt class="docutils literal">
       time.sleep()
      </tt>
     </li>
    </ul>
    <p>
     (Note: the
     <tt class="docutils literal">
      selector
     </tt>
     module already retries on
     <tt class="docutils literal">
      InterruptedError
     </tt>
     , but it
doesn't recompute the timeout yet)
    </p>
    <p>
     <tt class="docutils literal">
      os.close
     </tt>
     ,
     <tt class="docutils literal">
      close()
     </tt>
     methods and
     <tt class="docutils literal">
      os.dup2()
     </tt>
     are a special case: they
will ignore
     <tt class="docutils literal">
      EINTR
     </tt>
     instead of retrying.  The reason is complex but involves
behaviour under Linux and the fact that the file descriptor may really be
closed even if EINTR is returned. See articles:
    </p>
    <ul class="simple">
     <li>
      <a class="reference external" href="http://lwn.net/Articles/576478/">
       Returning EINTR from close()
      </a>
     </li>
     <li>
      <a class="reference external" href="http://linux.derkeiler.com/Mailing-Lists/Kernel/2005-09/3000.html">
       (LKML) Re: [patch 7/7] uml: retry host close() on EINTR
      </a>
     </li>
     <li>
      <a class="reference external" href="http://alobbs.com/post/54503240599/close-and-eintr">
       close() and EINTR
      </a>
     </li>
    </ul>
    <p>
     The
     <tt class="docutils literal">
      socket.socket.connect()
     </tt>
     method does not retry
     <tt class="docutils literal">
      connect()
     </tt>
     for
non-blocking sockets if it is interrupted by a signal (fails with
     <tt class="docutils literal">
      EINTR
     </tt>
     ).
The connection runs asynchronously in background. The caller is responsible
to wait until the socket becomes writable (ex: using
     <tt class="docutils literal">
      select.select()
     </tt>
     )
and then call
     <tt class="docutils literal">
      socket.socket.getsockopt(socket.SOL_SOCKET, socket.SO_ERROR)
     </tt>
     to check if the connection succeeded (
     <tt class="docutils literal">
      getsockopt()
     </tt>
     returns
     <tt class="docutils literal">
      0
     </tt>
     ) or failed.
    </p>
   </div>
   <div class="section" id="interruptederror-handling">
    <h2>
     <a class="toc-backref" href="#id11">
      InterruptedError handling
     </a>
    </h2>
    <p>
     Since interrupted system calls are automatically retried, the
     <tt class="docutils literal">
      InterruptedError
     </tt>
     exception should not occur anymore when calling those
system calls.  Therefore, manual handling of
     <tt class="docutils literal">
      InterruptedError
     </tt>
     as
described in
     <a class="reference internal" href="#status-in-python-3-4">
      Status in Python 3.4
     </a>
     can be removed, which will simplify
standard library code.
    </p>
   </div>
  </div>
  <div class="section" id="backward-compatibility">
   <h1>
    <a class="toc-backref" href="#id12">
     Backward compatibility
    </a>
   </h1>
   <p>
    Applications relying on the fact that system calls are interrupted
with
    <tt class="docutils literal">
     InterruptedError
    </tt>
    will hang.  The authors of this PEP don't
think that such applications exist, since they would be exposed to
other issues such as race conditions (there is an opportunity for deadlock
if the signal comes before the system call).  Besides, such code would
be non-portable.
   </p>
   <p>
    In any case, those applications must be fixed to handle signals differently,
to have a reliable behaviour on all platforms and all Python versions.
A possible strategy is to set up a signal handler raising a well-defined
exception, or use a wakeup file descriptor.
   </p>
   <p>
    For applications using event loops,
    <tt class="docutils literal">
     signal.set_wakeup_fd()
    </tt>
    is the
recommanded option to handle signals.  Python's low-level signal handler
will write signal numbers into the file descriptor and the event loop
will be awaken to read them.  The event loop can handle those signals
without the restriction of signal handlers (for example, the loop can
be woken up in any thread, not just the main thread).
   </p>
  </div>
  <div class="section" id="appendix">
   <h1>
    <a class="toc-backref" href="#id13">
     Appendix
    </a>
   </h1>
   <div class="section" id="wakeup-file-descriptor">
    <h2>
     <a class="toc-backref" href="#id14">
      Wakeup file descriptor
     </a>
    </h2>
    <p>
     Since Python 3.3,
     <tt class="docutils literal">
      signal.set_wakeup_fd()
     </tt>
     writes the signal number
into the file descriptor, whereas it only wrote a null byte before.
It becomes possible to distinguish between signals using the wakeup file
descriptor.
    </p>
    <p>
     Linux has a
     <tt class="docutils literal">
      signalfd()
     </tt>
     system call which provides more information on
each signal.  For example, it's possible to know the pid and uid who sent
the signal.  This function is not exposed in Python yet (see
     <a class="reference external" href="http://bugs.python.org/issue12304">
      issue 12304
     </a>
     ).
    </p>
    <p>
     On Unix, the
     <tt class="docutils literal">
      asyncio
     </tt>
     module uses the wakeup file descriptor to
wake up its event loop.
    </p>
   </div>
   <div class="section" id="multithreading">
    <h2>
     <a class="toc-backref" href="#id15">
      Multithreading
     </a>
    </h2>
    <p>
     A C signal handler can be called from any thread, but Python
signal handlers will always be called in the main Python thread.
    </p>
    <p>
     Python's C API provides the
     <tt class="docutils literal">
      PyErr_SetInterrupt()
     </tt>
     function which calls
the
     <tt class="docutils literal">
      SIGINT
     </tt>
     signal handler in order to interrupt the main Python thread.
    </p>
   </div>
   <div class="section" id="signals-on-windows">
    <h2>
     <a class="toc-backref" href="#id16">
      Signals on Windows
     </a>
    </h2>
    <div class="section" id="control-events">
     <h3>
      <a class="toc-backref" href="#id17">
       Control events
      </a>
     </h3>
     <p>
      Windows uses "control events":
     </p>
     <ul class="simple">
      <li>
       <tt class="docutils literal">
        CTRL_BREAK_EVENT
       </tt>
       : Break (
       <tt class="docutils literal">
        SIGBREAK
       </tt>
       )
      </li>
      <li>
       <tt class="docutils literal">
        CTRL_CLOSE_EVENT
       </tt>
       : Close event
      </li>
      <li>
       <tt class="docutils literal">
        CTRL_C_EVENT
       </tt>
       : CTRL+C (
       <tt class="docutils literal">
        SIGINT
       </tt>
       )
      </li>
      <li>
       <tt class="docutils literal">
        CTRL_LOGOFF_EVENT
       </tt>
       : Logoff
      </li>
      <li>
       <tt class="docutils literal">
        CTRL_SHUTDOWN_EVENT
       </tt>
       : Shutdown
      </li>
     </ul>
     <p>
      The
      <a class="reference external" href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms686016(v=vs.85).aspx">
       SetConsoleCtrlHandler() function
      </a>
      can be used to install a control handler.
     </p>
     <p>
      The
      <tt class="docutils literal">
       CTRL_C_EVENT
      </tt>
      and
      <tt class="docutils literal">
       CTRL_BREAK_EVENT
      </tt>
      events can be sent to a
process using the
      <a class="reference external" href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms683155(v=vs.85).aspx">
       GenerateConsoleCtrlEvent() function
      </a>
      .
This function is exposed in Python as
      <tt class="docutils literal">
       os.kill()
      </tt>
      .
     </p>
    </div>
    <div class="section" id="signals">
     <h3>
      <a class="toc-backref" href="#id18">
       Signals
      </a>
     </h3>
     <p>
      The following signals are supported on Windows:
     </p>
     <ul class="simple">
      <li>
       <tt class="docutils literal">
        SIGABRT
       </tt>
      </li>
      <li>
       <tt class="docutils literal">
        SIGBREAK
       </tt>
       (
       <tt class="docutils literal">
        CTRL_BREAK_EVENT
       </tt>
       ): signal only available on Windows
      </li>
      <li>
       <tt class="docutils literal">
        SIGFPE
       </tt>
      </li>
      <li>
       <tt class="docutils literal">
        SIGILL
       </tt>
      </li>
      <li>
       <tt class="docutils literal">
        SIGINT
       </tt>
       (
       <tt class="docutils literal">
        CTRL_C_EVENT
       </tt>
       )
      </li>
      <li>
       <tt class="docutils literal">
        SIGSEGV
       </tt>
      </li>
      <li>
       <tt class="docutils literal">
        SIGTERM
       </tt>
      </li>
     </ul>
    </div>
    <div class="section" id="sigint">
     <h3>
      <a class="toc-backref" href="#id19">
       SIGINT
      </a>
     </h3>
     <p>
      The default Python signal handler for
      <tt class="docutils literal">
       SIGINT
      </tt>
      sets a Windows event
object:
      <tt class="docutils literal">
       sigint_event
      </tt>
      .
     </p>
     <p>
      <tt class="docutils literal">
       time.sleep()
      </tt>
      is implemented with
      <tt class="docutils literal">
       WaitForSingleObjectEx()
      </tt>
      , it
waits for the
      <tt class="docutils literal">
       sigint_event
      </tt>
      object using
      <tt class="docutils literal">
       time.sleep()
      </tt>
      parameter
as the timeout.  So the sleep can be interrupted by
      <tt class="docutils literal">
       SIGINT
      </tt>
      .
     </p>
     <p>
      <tt class="docutils literal">
       _winapi.WaitForMultipleObjects()
      </tt>
      automatically adds
      <tt class="docutils literal">
       sigint_event
      </tt>
      to the list of watched handles, so it can also be
interrupted.
     </p>
     <p>
      <tt class="docutils literal">
       PyOS_StdioReadline()
      </tt>
      also used
      <tt class="docutils literal">
       sigint_event
      </tt>
      when
      <tt class="docutils literal">
       fgets()
      </tt>
      failed to check if Ctrl-C or Ctrl-Z was pressed.
     </p>
    </div>
   </div>
   <div class="section" id="links">
    <h2>
     <a class="toc-backref" href="#id20">
      Links
     </a>
    </h2>
    <div class="section" id="misc">
     <h3>
      <a class="toc-backref" href="#id21">
       Misc
      </a>
     </h3>
     <ul class="simple">
      <li>
       <a class="reference external" href="http://www.gnu.org/software/libc/manual/html_node/Interrupted-Primitives.html">
        glibc manual: Primitives Interrupted by Signals
       </a>
      </li>
      <li>
       <a class="reference external" href="https://rt.perl.org/Public/Bug/Display.html?id=119097">
        Bug #119097 for perl5: print returning EINTR in 5.14
       </a>
       .
      </li>
     </ul>
    </div>
    <div class="section" id="python-issues-related-to-eintr">
     <h3>
      <a class="toc-backref" href="#id22">
       Python issues related to EINTR
      </a>
     </h3>
     <p>
      The main issue is:
      <a class="reference external" href="http://bugs.python.org/issue18885">
       handle EINTR in the stdlib
      </a>
      .
     </p>
     <p>
      Open issues:
     </p>
     <ul class="simple">
      <li>
       <a class="reference external" href="http://bugs.python.org/issue22018">
        Add a new signal.set_wakeup_socket() function
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue22042">
        signal.set_wakeup_fd(fd): set the fd to non-blocking mode
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue22043">
        Use a monotonic clock to compute timeouts
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue22007">
        sys.stdout.write on OS X is not EINTR safe
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue21772">
        platform.uname() not EINTR safe
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue11266">
        asyncore does not handle EINTR in recv, send, connect, accept,
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue20611">
        socket.create_connection() doesn't handle EINTR properly
       </a>
      </li>
     </ul>
     <p>
      Closed issues:
     </p>
     <ul class="simple">
      <li>
       <a class="reference external" href="http://bugs.python.org/issue9867">
        Interrupted system calls are not retried
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue1049450">
        Solaris: EINTR exception in select/socket calls in telnetlib
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue12493">
        subprocess: Popen.communicate() doesn't handle EINTR in some cases
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue12338">
        multiprocessing.util._eintr_retry doen't recalculate timeouts
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue12268">
        file readline, readlines &amp; readall methods can lose data on EINTR
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue17097">
        multiprocessing BaseManager serve_client() does not check EINTR on recv
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue19849">
        selectors behaviour on EINTR undocumented
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue19850">
        asyncio: limit EINTR occurrences with SA_RESTART
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue21602">
        smtplib.py socket.create_connection() also doesn't handle EINTR properly
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue11650">
        Faulty RESTART/EINTR handling in Parser/myreadline.c
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue3771">
        test_httpservers intermittent failure, test_post and EINTR
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue686667">
        os.spawnv(P_WAIT, ...) on Linux doesn't handle EINTR
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue517554">
        asyncore fails when EINTR happens in pol
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue10956">
        file.write and file.read don't handle EINTR
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue1628205">
        socket.readline() interface doesn't handle EINTR properly
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue1068268">
        subprocess is not EINTR-safe
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue7978">
        SocketServer doesn't handle syscall interruption
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue17367">
        subprocess deadlock when read() is interrupted
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue12462">
        time.sleep(1): call PyErr_CheckSignals() if the sleep was interrupted
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue8354">
        siginterrupt with flag=False is reset when signal received
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue1089358">
        need siginterrupt()  on Linux - impossible to do timeouts
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue581232">
        [Windows] Can not interrupt time.sleep()
       </a>
      </li>
     </ul>
    </div>
    <div class="section" id="python-issues-related-to-signals">
     <h3>
      <a class="toc-backref" href="#id23">
       Python issues related to signals
      </a>
     </h3>
     <p>
      Open issues:
     </p>
     <ul class="simple">
      <li>
       <a class="reference external" href="http://bugs.python.org/issue17182">
        signal.default_int_handler should set signal number on the raised
exception
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue12304">
        expose signalfd(2) in the signal module
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue14484">
        missing return in win32_kill?
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue3180">
        Interrupts are lost during readline PyOS_InputHook processing
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue1687125">
        cannot catch KeyboardInterrupt when using curses getkey()
       </a>
      </li>
      <li>
       <a class="reference external" href="http://bugs.python.org/issue16151">
        Deferred KeyboardInterrupt in interactive mode
       </a>
      </li>
     </ul>
     <p>
      Closed issues:
     </p>
     <ul class="simple">
      <li>
       <a class="reference external" href="http://bugs.python.org/issue753733">
        sys.interrupt_main()
       </a>
      </li>
     </ul>
    </div>
   </div>
  </div>
  <div class="section" id="implementation">
   <h1>
    <a class="toc-backref" href="#id24">
     Implementation
    </a>
   </h1>
   <p>
    The implementation is tracked in
    <a class="reference external" href="http://bugs.python.org/issue23285">
     issue 23285
    </a>
    . It was committed on
February 07, 2015.
   </p>
  </div>
  <div class="section" id="copyright">
   <h1>
    <a class="toc-backref" href="#id25">
     Copyright
    </a>
   </h1>
   <p>
    This document has been placed in the public domain.
   </p>
   <!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 70
coding: utf-8
End: -->
  </div>
 </body>

<!-- Mirrored from www.python.org/dev/peps/pep-0475/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 03 Sep 2015 04:34:55 GMT -->
</html>Source: <a href="https://hg.python.org/peps/file/tip/pep-0475.txt">https://hg.python.org/peps/file/tip/pep-0475.txt</a>

    </article>


                </section>

                


<aside class="left-sidebar" role="secondary">

    






    





        <div class="twitter-widget sidebar-widget">
        <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/ThePSF" data-widget-id="434113224703610882">Tweets by @ThePSF</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>

    <div class="psf-sidebar-widget sidebar-widget">
        <h3 class="widget-title">The PSF</h3>
<p>The Python Software Foundation is the organization behind Python. Become a member of the PSF and help advance the software and our mission. </p>

    </div>

</aside>



                
                


            </div><!-- end .container -->
        </div><!-- end #content .content-wrapper -->

        <!-- Footer and social media list -->
        <footer id="site-map" class="main-footer" role="contentinfo">
            <div class="main-footer-links">
                <div class="container">

                    
                    <a id="back-to-top-1" class="jump-link" href="#python-network"><span aria-hidden="true" class="icon-arrow-up"><span>&#9650;</span></span> Back to Top</a>

                    

<ul class="sitemap navigation menu do-not-print" role="tree" id="container">
    
    <li class="tier-1 element-1">
        <a href="https://www.python.org/about/" >About</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/about/apps/" title="">Applications</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/about/quotes/" title="">Quotes</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/about/gettingstarted/" title="">Getting Started</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/about/help/" title="">Help</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-2">
        <a href="https://www.python.org/downloads/" >Downloads</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/downloads/" title="">All releases</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/downloads/source/" title="">Source code</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/downloads/windows/" title="">Windows</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/downloads/mac-osx/" title="">Mac OS X</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/download/other/" title="">Other Platforms</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://docs.python.org/3/license.html" title="">License</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/download/alternatives" title="">Alternative Implementations</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-3">
        <a href="https://www.python.org/doc/" >Documentation</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/doc/" title="">Docs</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/doc/av" title="">Audio/Visual Talks</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://wiki.python.org/moin/BeginnersGuide" title="">Beginner&#39;s Guide</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://docs.python.org/devguide/" title="">Developer&#39;s Guide</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://docs.python.org/faq/" title="">FAQ</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="http://wiki.python.org/moin/Languages" title="">Non-English Docs</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="../index.html" title="">PEP Index</a></li>
    
        <li class="tier-2 element-8" role="treeitem"><a href="https://wiki.python.org/moin/PythonBooks" title="">Python Books</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-4">
        <a href="https://www.python.org/community/" >Community</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/community/diversity/" title="">Diversity</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/community/irc/" title="">IRC</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/community/lists/" title="">Mailing Lists</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/community/workshops/" title="">Python Conferences</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/community/sigs/" title="">Special Interest Groups</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://wiki.python.org/moin/" title="">Python Wiki</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/community/logos/" title="">Python Logo</a></li>
    
        <li class="tier-2 element-8" role="treeitem"><a href="https://www.python.org/community/merchandise/" title="">Merchandise</a></li>
    
        <li class="tier-2 element-9" role="treeitem"><a href="https://www.python.org/community/awards" title="">Community Awards</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-5">
        <a href="https://www.python.org/about/success/" title="success-stories">Success Stories</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/about/success/#arts" title="">Arts</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/about/success/#business" title="">Business</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/about/success/#education" title="">Education</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/about/success/#engineering" title="">Engineering</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/about/success/#government" title="">Government</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://www.python.org/about/success/#scientific" title="">Scientific</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/about/success/#software-development" title="">Software Development</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-6">
        <a href="https://www.python.org/blogs/" title="News from around the Python world">News</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/blogs/" title="Python Insider Blog Posts">Python News</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="http://planetpython.org/" title="Planet Python">Community News</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="http://pyfound.blogspot.com/" title="PSF Blog">PSF News</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="http://pycon.blogspot.com/" title="PyCon Blog">PyCon News</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-7">
        <a href="https://www.python.org/events/" >Events</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/events/python-events/" title="">Python Events</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/events/python-user-group/" title="">User Group Events</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/events/python-events/past/" title="">Python Events Archive</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/events/python-user-group/past/" title="">User Group Events Archive</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://wiki.python.org/moin/PythonEventsCalendar#Submitting_an_Event" title="">Submit an Event</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-8">
        <a href="https://www.python.org/dev/" >Contributing</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="http://docs.python.org/devguide/" title="">Developer&#39;s Guide</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="http://bugs.python.org/" title="">Issue Tracker</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://mail.python.org/mailman/listinfo/python-dev" title="">python-dev list</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="http://pythonmentors.com/" title="">Core Mentorship</a></li>
    
</ul>

        
    </li>
    
</ul>


                    <a id="back-to-top-2" class="jump-link" href="#python-network"><span aria-hidden="true" class="icon-arrow-up"><span>&#9650;</span></span> Back to Top</a>
                    

                </div><!-- end .container -->
            </div> <!-- end .main-footer-links -->

            <div class="site-base">
                <div class="container">
                    
                    <ul class="footer-links navigation menu do-not-print" role="tree">
                        <li class="tier-1 element-1"><a href="https://www.python.org/about/help/">Help &amp; <span class="say-no-more">General</span> Contact</a></li>
                        <li class="tier-1 element-2"><a href="https://www.python.org/community/diversity/">Diversity <span class="say-no-more">Initiatives</span></a></li>
                        <li class="tier-1 element-3"><a href="https://github.com/python/pythondotorg/issues">Submit Website Bug</a></li>
                        <!--<li class="tier-1 element-3"><a href="#"><span class="say-no-more">Website</span> Colophon</a></li>-->
                    </ul>

                    <div class="copyright">
                        <p><small>
                            <span class="pre">Copyright &copy;2001-2015.</span>
                            &nbsp;<span class="pre"><a href="https://www.python.org/psf-landing/">Python Software Foundation</a></span>
                            &nbsp;<span class="pre"><a href="https://www.python.org/about/legal/">Legal Statements</a></span>
                            &nbsp;<span class="pre"><a href="https://www.python.org/privacy/">Privacy Policy</a></span>
                        </small></p>
                    </div>

                </div><!-- end .container -->
            </div><!-- end .site-base -->

        </footer>

    </div><!-- end #touchnav-wrapper -->

    
    <script src="../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../../static/js/libs/jquery-1.8.2.min.js"><\/script>')</script>

    <script src="../../../static/js/libs/masonry.pkgd.min.js"></script>

    <script type="text/javascript" src="../../../static/js/main-min.js" charset="utf-8"></script>
    

    <!--[if lte IE 7]>
    <script type="text/javascript" src="/static/js/plugins/IE8-min.js" charset="utf-8"></script>
    
    
    <![endif]-->

    <!--[if lte IE 8]>
    <script type="text/javascript" src="/static/js/plugins/getComputedStyle-min.js" charset="utf-8"></script>
    
    
    <![endif]-->

    

    
    

</body>
</html>

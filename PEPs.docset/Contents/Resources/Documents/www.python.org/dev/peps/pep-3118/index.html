<!doctype html>
<!--[if lt IE 7]>   <html class="no-js ie6 lt-ie7 lt-ie8 lt-ie9">   <![endif]-->
<!--[if IE 7]>      <html class="no-js ie7 lt-ie8 lt-ie9">          <![endif]-->
<!--[if IE 8]>      <html class="no-js ie8 lt-ie9">                 <![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en" dir="ltr">  <!--<![endif]-->


<!-- Mirrored from www.python.org/dev/peps/pep-3118/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 03 Sep 2015 04:35:22 GMT -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="prefetch" href="../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">

    <meta name="application-name" content="Python.org">
    <meta name="msapplication-tooltip" content="The official home of the Python Programming Language">
    <meta name="apple-mobile-web-app-title" content="Python.org">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="HandheldFriendly" content="True">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="cleartype" content="on">
    <meta http-equiv="imagetoolbar" content="false">

    <script src="../../../static/js/libs/modernizr.js"></script>

    <link href="../../../static/stylesheets/style.css" rel="stylesheet" type="text/css" title="default" />
    <link href="../../../static/stylesheets/mq.css" rel="stylesheet" type="text/css" media="not print, braille, embossed, speech, tty" />
    

    <!--[if (lte IE 8)&(!IEMobile)]>
    <link href="/static/stylesheets/no-mq.css" rel="stylesheet" type="text/css" media="screen" />
    
    
    <![endif]-->

    
    <link rel="icon" type="image/x-icon" href="https://www.python.org/static/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../../static/apple-touch-icon-144x144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../../static/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../../static/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../../../static/apple-touch-icon-precomposed.png">
    <link rel="apple-touch-icon" href="../../../static/apple-touch-icon-precomposed.png">

    
    <meta name="msapplication-TileImage" content="/static/metro-icon-144x144-precomposed.png"><!-- white shape -->
    <meta name="msapplication-TileColor" content="#3673a5"><!-- python blue -->
    <meta name="msapplication-navbutton-color" content="#3673a5">

    <meta property="og:site_name" content="Python.org">
    <meta property="og:type" content="website">

    <title>PEP 3118 -- Revising the buffer protocol | Python.org</title>
    <meta property="og:title" content="Welcome to Python.org">

    
    <meta name="description" content="The official home of the Python Programming Language">
    <meta name="og:description" content="The official home of the Python Programming Language">
    <meta name="keywords" content="Python programming language object oriented web free open source software license documentation download community">
    <meta property="og:tag" content="Python programming language object oriented web free open source software license documentation download community">
    <meta property="og:published_time" content="">
    <meta property="og:modified_time" content="">
    <meta property="og:author" content="">
    <meta property="og:section" content=""> 
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <meta property="og:video" content="">

    <link rel="author" href="https://www.python.org/static/humans.txt">

    

    
    <script type="application/ld+json">
     {
       "@context": "http://schema.org",
       "@type": "WebSite",
       "url": "https://www.python.org/",
       "potentialAction": {
         "@type": "SearchAction",
         "target": "https://www.python.org/search/?q={search_term_string}",
         "query-input": "required name=search_term_string"
       }
     }
    </script>

    
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39055973-1']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
    
</head>

<body class="python pages pep-page">

    <div id="touchnav-wrapper">

        <div id="nojs" class="do-not-print">
            <p><strong>Notice:</strong> While Javascript is not essential for this website, your interaction with the content will be limited. Please turn Javascript on for the full experience. </p>
        </div>

        <!--[if lt IE 8]>
        <div id="oldie-warning" class="do-not-print">
            <p><strong>Notice:</strong> Your browser is <em>ancient</em> and <a href="http://www.ie6countdown.com/">Microsoft agrees</a>. <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience a better web.</p>
        </div>
        <![endif]-->

        <!-- Sister Site Links -->
        <div id="top" class="top-bar do-not-print">

            <nav class="meta-navigation container" role="navigation">

                
                <div class="skip-link screen-reader-text">
                    <a href="#content" title="Skip to content">Skip to content</a>
                </div>

                
                <a id="close-python-network" class="jump-link" href="#python-network" aria-hidden="true">
                    <span aria-hidden="true" class="icon-arrow-down"><span>&#9660;</span></span> Close
                </a>

                

<ul class="menu" role="tree">
    
    <li class="python-meta ">
        <a href="https://www.python.org/" title="The Python Programming Language" >Python</a>
    </li>
    
    <li class="psf-meta ">
        <a href="https://www.python.org/psf-landing/" title="The Python Software Foundation" >PSF</a>
    </li>
    
    <li class="docs-meta ">
        <a href="https://docs.python.org/" title="Python Documentation" >Docs</a>
    </li>
    
    <li class="pypi-meta ">
        <a href="https://pypi.python.org/" title="Python Package Index" >PyPI</a>
    </li>
    
    <li class="jobs-meta ">
        <a href="https://www.python.org/jobs/" title="Python Job Board" >Jobs</a>
    </li>
    
    <li class="shop-meta ">
        <a href="https://www.python.org/community/" title="Python Community" >Community</a>
    </li>
    
</ul>


                <a id="python-network" class="jump-link" href="#top" aria-hidden="true">
                    <span aria-hidden="true" class="icon-arrow-up"><span>&#9650;</span></span> The Python Network
                </a>

            </nav>

        </div>

        <!-- Header elements -->
        <header class="main-header" role="banner">
            <div class="container">

                <h1 class="site-headline">
                    <a href="https://www.python.org/"><img class="python-logo" src="../../../static/img/python-logo.png" alt="python&trade;"></a>
                </h1>

                <div class="options-bar do-not-print">

                    
                    <a id="site-map-link" class="jump-to-menu" href="#site-map"><span class="menu-icon">&equiv;</span> Menu</a><form class="search-the-site" action="https://www.python.org/search/" method="get">
                        <fieldset title="Search Python.org">

                            <span aria-hidden="true" class="icon-search"></span>

                            <label class="screen-reader-text" for="id-search-field">Search This Site</label>
                            <input id="id-search-field" name="q" type="search" role="textbox" class="search-field" placeholder="Search" value="" tabindex="1">

                            <button type="submit" name="submit" id="submit" class="search-button" title="Submit this Search" tabindex="3">
                                GO
                            </button>

                            
                            <!--[if IE]><input type="text" style="display: none;" disabled="disabled" size="1" tabindex="4"><![endif]-->

                        </fieldset>
                    </form><span class="breaker"></span><div class="adjust-font-size" aria-hidden="true">
                        <ul class="navigation menu" aria-label="Adjust Text Size on Page">
                            <li class="tier-1 last" aria-haspopup="true">
                                <a href="#" class="action-trigger"><strong><small>A</small> A</strong></a>
                                <ul class="subnav menu">
                                    <li class="tier-2 element-1" role="treeitem"><a class="text-shrink" title="Make Text Smaller" href="javascript:;">Smaller</a></li>
                                    <li class="tier-2 element-2" role="treeitem"><a class="text-grow" title="Make Text Larger" href="javascript:;">Larger</a></li>
                                    <li class="tier-2 element-3" role="treeitem"><a class="text-reset" title="Reset any font size changes I have made" href="javascript:;">Reset</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div><div class="winkwink-nudgenudge">
                        <ul class="navigation menu" aria-label="Social Media Navigation">
                            <li class="tier-1 last" aria-haspopup="true">
                                <a href="#" class="action-trigger">Socialize</a>
                                <ul class="subnav menu">
                                    <li class="tier-2 element-1" role="treeitem"><a href="http://plus.google.com/+Python"><span aria-hidden="true" class="icon-google-plus"></span>Google+</a></li>
                                    <li class="tier-2 element-2" role="treeitem"><a href="http://www.facebook.com/pythonlang?fref=ts"><span aria-hidden="true" class="icon-facebook"></span>Facebook</a></li>
                                    <li class="tier-2 element-3" role="treeitem"><a href="http://twitter.com/ThePSF"><span aria-hidden="true" class="icon-twitter"></span>Twitter</a></li>
                                    <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/community/irc/"><span aria-hidden="true" class="icon-freenode"></span>Chat on IRC</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div><div class="account-signin">
                        <ul class="navigation menu" aria-label="Social Media Navigation">
                            <li class="tier-1 last" aria-haspopup="true">
                                
                                <a href="https://www.python.org/accounts/login/" title="Sign Up or Sign In to Python.org">Sign In</a>
                                <ul class="subnav menu">
                                    <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/accounts/signup/">Sign Up / Register</a></li>
                                    <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/accounts/login/">Sign In</a></li>
                                </ul>
                                
                            </li>
                        </ul>
                    </div>

                </div><!-- end options-bar -->

                <nav id="mainnav" class="python-navigation main-navigation do-not-print" role="navigation">
                    
                        
<ul class="navigation menu" role="menubar" aria-label="Main Navigation">
  
    
    
    <li id="about" class="tier-1 element-1  " aria-haspopup="true">
        <a href="https://www.python.org/about/" title="" class="">About</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/about/apps/" title="">Applications</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/about/quotes/" title="">Quotes</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/about/gettingstarted/" title="">Getting Started</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/about/help/" title="">Help</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="downloads" class="tier-1 element-2  " aria-haspopup="true">
        <a href="https://www.python.org/downloads/" title="" class="">Downloads</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/downloads/" title="">All releases</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/downloads/source/" title="">Source code</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/downloads/windows/" title="">Windows</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/downloads/mac-osx/" title="">Mac OS X</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/download/other/" title="">Other Platforms</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://docs.python.org/3/license.html" title="">License</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/download/alternatives" title="">Alternative Implementations</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="documentation" class="tier-1 element-3  " aria-haspopup="true">
        <a href="https://www.python.org/doc/" title="" class="">Documentation</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/doc/" title="">Docs</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/doc/av" title="">Audio/Visual Talks</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://wiki.python.org/moin/BeginnersGuide" title="">Beginner&#39;s Guide</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://docs.python.org/devguide/" title="">Developer&#39;s Guide</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://docs.python.org/faq/" title="">FAQ</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="http://wiki.python.org/moin/Languages" title="">Non-English Docs</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="../index.html" title="">PEP Index</a></li>
    
        <li class="tier-2 element-8" role="treeitem"><a href="https://wiki.python.org/moin/PythonBooks" title="">Python Books</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="community" class="tier-1 element-4  " aria-haspopup="true">
        <a href="https://www.python.org/community/" title="" class="">Community</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/community/diversity/" title="">Diversity</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/community/irc/" title="">IRC</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/community/lists/" title="">Mailing Lists</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/community/workshops/" title="">Python Conferences</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/community/sigs/" title="">Special Interest Groups</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://wiki.python.org/moin/" title="">Python Wiki</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/community/logos/" title="">Python Logo</a></li>
    
        <li class="tier-2 element-8" role="treeitem"><a href="https://www.python.org/community/merchandise/" title="">Merchandise</a></li>
    
        <li class="tier-2 element-9" role="treeitem"><a href="https://www.python.org/community/awards" title="">Community Awards</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="success-stories" class="tier-1 element-5  " aria-haspopup="true">
        <a href="https://www.python.org/about/success/" title="success-stories" class="">Success Stories</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/about/success/#arts" title="">Arts</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/about/success/#business" title="">Business</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/about/success/#education" title="">Education</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/about/success/#engineering" title="">Engineering</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/about/success/#government" title="">Government</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://www.python.org/about/success/#scientific" title="">Scientific</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/about/success/#software-development" title="">Software Development</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="news" class="tier-1 element-6  " aria-haspopup="true">
        <a href="https://www.python.org/blogs/" title="News from around the Python world" class="">News</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/blogs/" title="Python Insider Blog Posts">Python News</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="http://planetpython.org/" title="Planet Python">Community News</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="http://pyfound.blogspot.com/" title="PSF Blog">PSF News</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="http://pycon.blogspot.com/" title="PyCon Blog">PyCon News</a></li>
    
</ul>

        
    </li>
    
    
    
    <li id="events" class="tier-1 element-7  " aria-haspopup="true">
        <a href="https://www.python.org/events/" title="" class="">Events</a>
        
            

<ul class="subnav menu" role="menu" aria-hidden="true">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/events/python-events/" title="">Python Events</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/events/python-user-group/" title="">User Group Events</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/events/python-events/past/" title="">Python Events Archive</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/events/python-user-group/past/" title="">User Group Events Archive</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://wiki.python.org/moin/PythonEventsCalendar#Submitting_an_Event" title="">Submit an Event</a></li>
    
</ul>

        
    </li>
    
    
    
    
  
</ul>

                    
                </nav>

                <div class="header-banner "> <!-- for optional "do-not-print" class -->
                    
                    
                </div>

                
                

             </div><!-- end .container -->
        </header>

        <div id="content" class="content-wrapper">
            <!-- Main Content Column -->
            <div class="container">

                <section class="main-content with-left-sidebar" role="main">

                    
<ul class="breadcrumbs menu">
    <li>
        <a href="https://www.python.org/" title="The Python Programming Language">Python</a><span class="prompt">&gt;&gt;&gt;</span>
    </li>
    <li>
        <a href="https://www.python.org/dev/">Python Developer's Guide</a><span class="prompt">&gt;&gt;&gt;</span>
    </li>
    <li>
        <a href="../index.html">PEP Index</a><span class="prompt">&gt;&gt;&gt;</span>
    </li>
    <li>PEP 3118 -- Revising the buffer protocol</li>
</ul>


                    
<style>
   .pep-page pre {
        padding: .5em;
        background: inherit;
        border-left: 0px;
        -webkit-box-shadow: 0 0 0 0;
        -moz-box-shadow: 0 0 0 0;
        box-shadow: 0 0 0 0;
   }
</style>

    
    <article class="text">
        

        <header class="article-header">
            <h1 class="page-title">PEP 3118 -- Revising the buffer protocol</h1>
        </header>

        <!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/dev/peps/pep-0001 for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<html>
 <body>
  <table class="rfc2822 docutils field-list" frame="void" rules="none">
   <col class="field-name">
   </col>
   <col class="field-body">
   </col>
   <tbody valign="top">
    <tr class="field">
     <th class="field-name">
      PEP:
     </th>
     <td class="field-body">
      3118
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Title:
     </th>
     <td class="field-body">
      Revising the buffer protocol
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Author:
     </th>
     <td class="field-body">
      Travis Oliphant &lt;oliphant at ee.byu.edu&gt;, Carl Banks &lt;pythondev at aerojockey.com&gt;
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Status:
     </th>
     <td class="field-body">
      Final
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Type:
     </th>
     <td class="field-body">
      Standards Track
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Created:
     </th>
     <td class="field-body">
      28-Aug-2006
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Python-Version:
     </th>
     <td class="field-body">
      3000
     </td>
    </tr>
    <tr class="field">
     <th class="field-name">
      Post-History:
     </th>
     <td class="field-body">
     </td>
    </tr>
   </tbody>
  </table>
  <hr/>
  <div class="contents topic" id="contents">
   <p class="topic-title first">
    Contents
   </p>
   <ul class="simple">
    <li>
     <a class="reference internal" href="#abstract" id="id2">
      Abstract
     </a>
    </li>
    <li>
     <a class="reference internal" href="#rationale" id="id3">
      Rationale
     </a>
    </li>
    <li>
     <a class="reference internal" href="#proposal-overview" id="id4">
      Proposal Overview
     </a>
    </li>
    <li>
     <a class="reference internal" href="#specification" id="id5">
      Specification
     </a>
     <ul>
      <li>
       <a class="reference internal" href="#access-flags" id="id6">
        Access flags
       </a>
      </li>
      <li>
       <a class="reference internal" href="#the-py-buffer-struct" id="id7">
        The Py_buffer struct
       </a>
      </li>
      <li>
       <a class="reference internal" href="#releasing-the-buffer" id="id8">
        Releasing the buffer
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a class="reference internal" href="#new-c-api-calls-are-proposed" id="id9">
      New C-API calls are proposed
     </a>
    </li>
    <li>
     <a class="reference internal" href="#additions-to-the-struct-string-syntax" id="id10">
      Additions to the struct string-syntax
     </a>
    </li>
    <li>
     <a class="reference internal" href="#examples-of-data-format-descriptions" id="id11">
      Examples of Data-Format Descriptions
     </a>
    </li>
    <li>
     <a class="reference internal" href="#code-to-be-affected" id="id12">
      Code to be affected
     </a>
    </li>
    <li>
     <a class="reference internal" href="#issues-and-details" id="id13">
      Issues and Details
     </a>
    </li>
    <li>
     <a class="reference internal" href="#code" id="id14">
      Code
     </a>
    </li>
    <li>
     <a class="reference internal" href="#examples" id="id15">
      Examples
     </a>
     <ul>
      <li>
       <a class="reference internal" href="#ex-1" id="id16">
        Ex. 1
       </a>
      </li>
      <li>
       <a class="reference internal" href="#ex-2" id="id17">
        Ex. 2
       </a>
      </li>
      <li>
       <a class="reference internal" href="#ex-3" id="id18">
        Ex.  3
       </a>
      </li>
      <li>
       <a class="reference internal" href="#ex-4" id="id19">
        Ex. 4
       </a>
      </li>
     </ul>
    </li>
    <li>
     <a class="reference internal" href="#copyright" id="id20">
      Copyright
     </a>
    </li>
   </ul>
  </div>
  <div class="section" id="abstract">
   <h1>
    <a class="toc-backref" href="#id2">
     Abstract
    </a>
   </h1>
   <p>
    This PEP proposes re-designing the buffer interface (
    <tt class="docutils literal">
     PyBufferProcs
    </tt>
    function pointers) to improve the way Python allows memory sharing in
Python 3.0
   </p>
   <p>
    In particular, it is proposed that the character buffer portion
of the API be eliminated and the multiple-segment portion be
re-designed in conjunction with allowing for strided memory
to be shared.   In addition, the new buffer interface will
allow the sharing of any multi-dimensional nature of the
memory and what data-format the memory contains.
   </p>
   <p>
    This interface will allow any extension module to either
create objects that share memory or create algorithms that
use and manipulate raw memory from arbitrary objects that
export the interface.
   </p>
  </div>
  <div class="section" id="rationale">
   <h1>
    <a class="toc-backref" href="#id3">
     Rationale
    </a>
   </h1>
   <p>
    The Python 2.X buffer protocol allows different Python types to
exchange a pointer to a sequence of internal buffers.  This
functionality is
    <em>
     extremely
    </em>
    useful for sharing large segments of
memory between different high-level objects, but it is too limited and
has issues:
   </p>
   <ol class="arabic">
    <li>
     <p class="first">
      There is the little used "sequence-of-segments" option
(bf_getsegcount) that is not well motivated.
     </p>
    </li>
    <li>
     <p class="first">
      There is the apparently redundant character-buffer option
(bf_getcharbuffer)
     </p>
    </li>
    <li>
     <p class="first">
      There is no way for a consumer to tell the buffer-API-exporting
object it is "finished" with its view of the memory and
therefore no way for the exporting object to be sure that it is
safe to reallocate the pointer to the memory that it owns (for
example, the array object reallocating its memory after sharing
it with the buffer object which held the original pointer led
to the infamous buffer-object problem).
     </p>
    </li>
    <li>
     <p class="first">
      Memory is just a pointer with a length. There is no way to
describe what is "in" the memory (float, int, C-structure, etc.)
     </p>
    </li>
    <li>
     <p class="first">
      There is no shape information provided for the memory.  But,
several array-like Python types could make use of a standard
way to describe the shape-interpretation of the memory
(wxPython, GTK, pyQT, CVXOPT, PyVox, Audio and Video
Libraries, ctypes, NumPy, data-base interfaces, etc.)
     </p>
    </li>
    <li>
     <p class="first">
      There is no way to share discontiguous memory (except through
the sequence of segments notion).
     </p>
     <p>
      There are two widely used libraries that use the concept of
discontiguous memory: PIL and NumPy.  Their view of discontiguous
arrays is different, though.  The proposed buffer interface allows
sharing of either memory model.  Exporters will typically use only one
approach and consumers may choose to support discontiguous
arrays of each type however they choose.
     </p>
     <p>
      NumPy uses the notion of constant striding in each dimension as its
basic concept of an array. With this concept, a simple sub-region
of a larger array can be described without copying the data.
Thus, stride information is the additional information that must be
shared.
     </p>
     <p>
      The PIL uses a more opaque memory representation. Sometimes an
image is contained in a contiguous segment of memory, but sometimes
it is contained in an array of pointers to the contiguous segments
(usually lines) of the image.  The PIL is where the idea of multiple
buffer segments in the original buffer interface came from.
     </p>
     <p>
      NumPy's strided memory model is used more often in computational
libraries and because it is so simple it makes sense to support
memory sharing using this model.  The PIL memory model is sometimes
used in C-code where a 2-d array can then be accessed using double
pointer indirection:  e.g.
      <tt class="docutils literal">
       <span class="pre">
        image[i][j]
       </span>
      </tt>
      .
     </p>
     <p>
      The buffer interface should allow the object to export either of these
memory models.  Consumers are free to either require contiguous memory
or write code to handle one or both of these memory models.
     </p>
    </li>
   </ol>
  </div>
  <div class="section" id="proposal-overview">
   <h1>
    <a class="toc-backref" href="#id4">
     Proposal Overview
    </a>
   </h1>
   <ul class="simple">
    <li>
     Eliminate the char-buffer and multiple-segment sections of the
buffer-protocol.
    </li>
    <li>
     Unify the read/write versions of getting the buffer.
    </li>
    <li>
     Add a new function to the interface that should be called when
the consumer object is "done" with the memory area.
    </li>
    <li>
     Add a new variable to allow the interface to describe what is in
memory (unifying what is currently done now in struct and
array)
    </li>
    <li>
     Add a new variable to allow the protocol to share shape information
    </li>
    <li>
     Add a new variable for sharing stride information
    </li>
    <li>
     Add a new mechanism for sharing arrays that must
be accessed using pointer indirection.
    </li>
    <li>
     Fix all objects in the core and the standard library to conform
to the new interface
    </li>
    <li>
     Extend the struct module to handle more format specifiers
    </li>
    <li>
     Extend the buffer object into a new memory object which places
a Python veneer around the buffer interface.
    </li>
    <li>
     Add a few functions to make it easy to copy contiguous data
in and out of object supporting the buffer interface.
    </li>
   </ul>
  </div>
  <div class="section" id="specification">
   <h1>
    <a class="toc-backref" href="#id5">
     Specification
    </a>
   </h1>
   <p>
    While the new specification allows for complicated memory sharing,
simple contiguous buffers of bytes can still be obtained from an
object.  In fact, the new protocol allows a standard mechanism for
doing this even if the original object is not represented as a
contiguous chunk of memory.
   </p>
   <p>
    The easiest way to obtain a simple contiguous chunk of memory is
to use the provided C-API to obtain a chunk of memory.
   </p>
   <p>
    Change the
    <tt class="docutils literal">
     PyBufferProcs
    </tt>
    structure to
   </p>
   <pre class="literal-block">
typedef struct {
     getbufferproc bf_getbuffer;
     releasebufferproc bf_releasebuffer;
} PyBufferProcs;
</pre>
   <p>
    Both of these routines are optional for a type object
   </p>
   <pre class="literal-block">
typedef int (*getbufferproc)(PyObject *obj, PyBuffer *view, int flags)
</pre>
   <p>
    This function returns
    <tt class="docutils literal">
     0
    </tt>
    on success and
    <tt class="docutils literal">
     <span class="pre">
      -1
     </span>
    </tt>
    on failure (and raises an
error). The first variable is the "exporting" object.  The second
argument is the address to a bufferinfo structure.  Both arguments must
never be NULL.
   </p>
   <p>
    The third argument indicates what kind of buffer the consumer is
prepared to deal with and therefore what kind of buffer the exporter
is allowed to return.  The new buffer interface allows for much more
complicated memory sharing possibilities.  Some consumers may not be
able to handle all the complexibity but may want to see if the
exporter will let them take a simpler view to its memory.
   </p>
   <p>
    In addition, some exporters may not be able to share memory in every
possible way and may need to raise errors to signal to some consumers
that something is just not possible.  These errors should be
    <tt class="docutils literal">
     PyErr_BufferError
    </tt>
    unless there is another error that is actually
causing the problem. The exporter can use flags information to
simplify how much of the PyBuffer structure is filled in with
non-default values and/or raise an error if the object can't support a
simpler view of its memory.
   </p>
   <p>
    The exporter should always fill in all elements of the buffer
structure (with defaults or NULLs if nothing else is requested). The
PyBuffer_FillInfo function can be used for simple cases.
   </p>
   <div class="section" id="access-flags">
    <h2>
     <a class="toc-backref" href="#id6">
      Access flags
     </a>
    </h2>
    <p>
     Some flags are useful for requesting a specific kind of memory
segment, while others indicate to the exporter what kind of
information the consumer can deal with.  If certain information is not
asked for by the consumer, but the exporter cannot share its memory
without that information, then a
     <tt class="docutils literal">
      PyErr_BufferError
     </tt>
     should be raised.
    </p>
    <p>
     <tt class="docutils literal">
      PyBUF_SIMPLE
     </tt>
    </p>
    <blockquote>
     This is the default flag state (0). The returned buffer may or may
not have writable memory.  The format will be assumed to be
unsigned bytes.  This is a "stand-alone" flag constant.  It never
needs to be |'d to the others.  The exporter will raise an error if
it cannot provide such a contiguous buffer of bytes.
    </blockquote>
    <p>
     <tt class="docutils literal">
      PyBUF_WRITABLE
     </tt>
    </p>
    <blockquote>
     The returned buffer must be writable.  If it is not writable,
then raise an error.
    </blockquote>
    <p>
     <tt class="docutils literal">
      PyBUF_FORMAT
     </tt>
    </p>
    <blockquote>
     The returned buffer must have true format information if this flag
is provided.  This would be used when the consumer is going to be
checking for what 'kind' of data is actually stored.  An exporter
should always be able to provide this information if requested.  If
format is not explicitly requested then the format must be returned
as
     <tt class="docutils literal">
      NULL
     </tt>
     (which means "B", or unsigned bytes)
    </blockquote>
    <p>
     <tt class="docutils literal">
      PyBUF_ND
     </tt>
    </p>
    <blockquote>
     The returned buffer must provide shape information. The memory will
be assumed C-style contiguous (last dimension varies the fastest).
The exporter may raise an error if it cannot provide this kind of
contiguous buffer.  If this is not given then shape will be NULL.
    </blockquote>
    <p>
     <tt class="docutils literal">
      PyBUF_STRIDES
     </tt>
     (implies
     <tt class="docutils literal">
      PyBUF_ND
     </tt>
     )
    </p>
    <blockquote>
     The returned buffer must provide strides information (i.e. the
strides cannot be NULL).  This would be used when the consumer can
handle strided, discontiguous arrays. Handling strides
automatically assumes you can handle shape. The exporter may raise
an error if cannot provide a strided-only representation of the
data (i.e. without the suboffsets).
    </blockquote>
    <div class="line-block">
     <div class="line">
      <tt class="docutils literal">
       PyBUF_C_CONTIGUOUS
      </tt>
     </div>
     <div class="line">
      <tt class="docutils literal">
       PyBUF_F_CONTIGUOUS
      </tt>
     </div>
     <div class="line">
      <tt class="docutils literal">
       PyBUF_ANY_CONTIGUOUS
      </tt>
     </div>
    </div>
    <blockquote>
     These flags indicate that the returned buffer must be respectively,
C-contiguous (last dimension varies the fastest), Fortran
contiguous (first dimension varies the fastest) or either one.
All of these flags imply PyBUF_STRIDES and guarantee that the
strides buffer info structure will be filled in correctly.
    </blockquote>
    <p>
     <tt class="docutils literal">
      PyBUF_INDIRECT
     </tt>
     (implies
     <tt class="docutils literal">
      PyBUF_STRIDES
     </tt>
     )
    </p>
    <blockquote>
     The returned buffer must have suboffsets information (which can be
NULL if no suboffsets are needed).  This would be used when the
consumer can handle indirect array referencing implied by these
suboffsets.
    </blockquote>
    <p>
     Specialized combinations of flags for specific kinds of memory_sharing.
    </p>
    <blockquote>
     <p>
      Multi-dimensional (but contiguous)
     </p>
     <blockquote>
      <div class="line-block">
       <div class="line">
        <tt class="docutils literal">
         PyBUF_CONTIG
        </tt>
        (
        <tt class="docutils literal">
         PyBUF_ND | PyBUF_WRITABLE
        </tt>
        )
       </div>
       <div class="line">
        <tt class="docutils literal">
         PyBUF_CONTIG_RO
        </tt>
        (
        <tt class="docutils literal">
         PyBUF_ND
        </tt>
        )
       </div>
      </div>
     </blockquote>
     <p>
      Multi-dimensional using strides but aligned
     </p>
     <blockquote>
      <div class="line-block">
       <div class="line">
        <tt class="docutils literal">
         PyBUF_STRIDED
        </tt>
        (
        <tt class="docutils literal">
         PyBUF_STRIDES | PyBUF_WRITABLE
        </tt>
        )
       </div>
       <div class="line">
        <tt class="docutils literal">
         PyBUF_STRIDED_RO
        </tt>
        (
        <tt class="docutils literal">
         PyBUF_STRIDES
        </tt>
        )
       </div>
      </div>
     </blockquote>
     <p>
      Multi-dimensional using strides and not necessarily aligned
     </p>
     <blockquote>
      <div class="line-block">
       <div class="line">
        <tt class="docutils literal">
         PyBUF_RECORDS
        </tt>
        (
        <tt class="docutils literal">
         PyBUF_STRIDES | PyBUF_WRITABLE | PyBUF_FORMAT
        </tt>
        )
       </div>
       <div class="line">
        <tt class="docutils literal">
         PyBUF_RECORDS_RO
        </tt>
        (
        <tt class="docutils literal">
         PyBUF_STRIDES | PyBUF_FORMAT
        </tt>
        )
       </div>
      </div>
     </blockquote>
     <p>
      Multi-dimensional using sub-offsets
     </p>
     <blockquote>
      <div class="line-block">
       <div class="line">
        <tt class="docutils literal">
         PyBUF_FULL
        </tt>
        (
        <tt class="docutils literal">
         PyBUF_INDIRECT | PyBUF_WRITABLE | PyBUF_FORMAT
        </tt>
        )
       </div>
       <div class="line">
        <tt class="docutils literal">
         PyBUF_FULL_RO
        </tt>
        (
        <tt class="docutils literal">
         PyBUF_INDIRECT | PyBUF_FORMAT
        </tt>
        )
       </div>
      </div>
     </blockquote>
    </blockquote>
    <p>
     Thus, the consumer simply wanting a contiguous chunk of bytes from
the object would use
     <tt class="docutils literal">
      PyBUF_SIMPLE
     </tt>
     , while a consumer that understands
how to make use of the most complicated cases could use
     <tt class="docutils literal">
      PyBUF_FULL
     </tt>
     .
    </p>
    <p>
     The format information is only guaranteed to be non-NULL if
     <tt class="docutils literal">
      PyBUF_FORMAT
     </tt>
     is in the flag argument, otherwise it is expected the
consumer will assume unsigned bytes.
    </p>
    <p>
     There is a C-API that simple exporting objects can use to fill-in the
buffer info structure correctly according to the provided flags if a
contiguous chunk of "unsigned bytes" is all that can be exported.
    </p>
   </div>
   <div class="section" id="the-py-buffer-struct">
    <h2>
     <a class="toc-backref" href="#id7">
      The Py_buffer struct
     </a>
    </h2>
    <p>
     The bufferinfo structure is:
    </p>
    <pre class="literal-block">
struct bufferinfo {
     void *buf;
     Py_ssize_t len;
     int readonly;
     const char *format;
     int ndim;
     Py_ssize_t *shape;
     Py_ssize_t *strides;
     Py_ssize_t *suboffsets;
     Py_ssize_t itemsize;
     void *internal;
} Py_buffer;
</pre>
    <p>
     Before calling the bf_getbuffer function, the bufferinfo structure can
be filled with whatever, but the
     <tt class="docutils literal">
      buf
     </tt>
     field must be NULL when
requesting a new buffer.  Upon return from bf_getbuffer, the
bufferinfo structure is filled in with relevant information about the
buffer.  This same bufferinfo structure must be passed to
bf_releasebuffer (if available) when the consumer is done with the
memory. The caller is responsible for keeping a reference to obj until
releasebuffer is called (i.e. the call to bf_getbuffer does not alter
the reference count of obj).
    </p>
    <p>
     The members of the bufferinfo structure are:
    </p>
    <dl class="docutils">
     <dt>
      <tt class="docutils literal">
       buf
      </tt>
     </dt>
     <dd>
      a pointer to the start of the memory for the object
     </dd>
     <dt>
      <tt class="docutils literal">
       len
      </tt>
     </dt>
     <dd>
      the total bytes of memory the object uses.  This should be the
same as the product of the shape array multiplied by the number of
bytes per item of memory.
     </dd>
     <dt>
      <tt class="docutils literal">
       readonly
      </tt>
     </dt>
     <dd>
      an integer variable to hold whether or not the memory is readonly.
1 means the memory is readonly, zero means the memory is writable.
     </dd>
     <dt>
      <tt class="docutils literal">
       format
      </tt>
     </dt>
     <dd>
      a NULL-terminated format-string (following the struct-style syntax
including extensions) indicating what is in each element of
memory.  The number of elements is len / itemsize, where itemsize
is the number of bytes implied by the format.  This can be NULL which
implies standard unsigned bytes ("B").
     </dd>
     <dt>
      <tt class="docutils literal">
       ndim
      </tt>
     </dt>
     <dd>
      a variable storing the number of dimensions the memory represents.
Must be &gt;=0.  A value of 0 means that shape and strides and suboffsets
must be
      <tt class="docutils literal">
       NULL
      </tt>
      (i.e. the memory represents a scalar).
     </dd>
     <dt>
      <tt class="docutils literal">
       shape
      </tt>
     </dt>
     <dd>
      an array of
      <tt class="docutils literal">
       Py_ssize_t
      </tt>
      of length
      <tt class="docutils literal">
       ndims
      </tt>
      indicating the
shape of the memory as an N-D array.  Note that
      <tt class="docutils literal">
       <span class="pre">
        ((*shape)[0]
       </span>
       *
... *
       <span class="pre">
        (*shape)[ndims-1])*itemsize
       </span>
       = len
      </tt>
      .  If ndims is 0 (indicating
a scalar), then this must be
      <tt class="docutils literal">
       NULL
      </tt>
      .
     </dd>
     <dt>
      <tt class="docutils literal">
       strides
      </tt>
     </dt>
     <dd>
      address of a
      <tt class="docutils literal">
       Py_ssize_t*
      </tt>
      variable that will be filled with a
pointer to an array of
      <tt class="docutils literal">
       Py_ssize_t
      </tt>
      of length
      <tt class="docutils literal">
       ndims
      </tt>
      (or
      <tt class="docutils literal">
       NULL
      </tt>
      if
      <tt class="docutils literal">
       ndims
      </tt>
      is 0).  indicating the number of bytes to skip to get to
the next element in each dimension.  If this is not requested by
the caller (
      <tt class="docutils literal">
       PyBUF_STRIDES
      </tt>
      is not set), then this should be set
to NULL which indicates a C-style contiguous array or a
PyExc_BufferError raised if this is not possible.
     </dd>
     <dt>
      <tt class="docutils literal">
       suboffsets
      </tt>
     </dt>
     <dd>
      <p class="first">
       address of a
       <tt class="docutils literal">
        Py_ssize_t *
       </tt>
       variable that will be filled with a
pointer to an array of
       <tt class="docutils literal">
        Py_ssize_t
       </tt>
       of length
       <tt class="docutils literal">
        *ndims
       </tt>
       .  If
these suboffset numbers are &gt;=0, then the value stored along the
indicated dimension is a pointer and the suboffset value dictates
how many bytes to add to the pointer after de-referencing.  A
suboffset value that it negative indicates that no de-referencing
should occur (striding in a contiguous memory block).  If all
suboffsets are negative (i.e. no de-referencing is needed, then
this must be NULL (the default value).  If this is not requested
by the caller (PyBUF_INDIRECT is not set), then this should be
set to NULL or an PyExc_BufferError raised if this is not possible.
      </p>
      <p>
       For clarity, here is a function that returns a pointer to the
element in an N-D array pointed to by an N-dimesional index when
there are both non-NULL strides and suboffsets:
      </p>
      <pre class="literal-block">
void *get_item_pointer(int ndim, void *buf, Py_ssize_t *strides,
                       Py_ssize_t *suboffsets, Py_ssize_t *indices) {
    char *pointer = (char*)buf;
    int i;
    for (i = 0; i &lt; ndim; i++) {
        pointer += strides[i] * indices[i];
        if (suboffsets[i] &gt;=0 ) {
            pointer = *((char**)pointer) + suboffsets[i];
        }
    }
    return (void*)pointer;
}
</pre>
      <p class="last">
       Notice the suboffset is added "after" the dereferencing occurs.
Thus slicing in the ith dimension would add to the suboffsets in
the (i-1)st dimension.  Slicing in the first dimension would change
the location of the starting pointer directly (i.e. buf would
be modified).
      </p>
     </dd>
     <dt>
      <tt class="docutils literal">
       itemsize
      </tt>
     </dt>
     <dd>
      This is a storage for the itemsize (in bytes) of each element of the shared
memory.  It is technically un-necessary as it can be obtained using
      <tt class="docutils literal">
       PyBuffer_SizeFromFormat
      </tt>
      , however an exporter may know this
information without parsing the format string and it is necessary
to know the itemsize for proper interpretation of striding.
Therefore, storing it is more convenient and faster.
     </dd>
     <dt>
      <tt class="docutils literal">
       internal
      </tt>
     </dt>
     <dd>
      This is for use internally by the exporting object.  For example,
this might be re-cast as an integer by the exporter and used to
store flags about whether or not the shape, strides, and suboffsets
arrays must be freed when the buffer is released.   The consumer
should never alter this value.
     </dd>
    </dl>
    <p>
     The exporter is responsible for making sure that any memory pointed to
by buf, format, shape, strides, and suboffsets is valid until
releasebuffer is called.  If the exporter wants to be able to change
an object's shape, strides, and/or suboffsets before releasebuffer is
called then it should allocate those arrays when getbuffer is called
(pointing to them in the buffer-info structure provided) and free them
when releasebuffer is called.
    </p>
   </div>
   <div class="section" id="releasing-the-buffer">
    <h2>
     <a class="toc-backref" href="#id8">
      Releasing the buffer
     </a>
    </h2>
    <p>
     The same bufferinfo struct should be used in the release-buffer
interface call.  The caller is responsible for the memory of the
Py_buffer structure itself.
    </p>
    <pre class="literal-block">
typedef void (*releasebufferproc)(PyObject *obj, Py_buffer *view)
</pre>
    <p>
     Callers of getbufferproc must make sure that this function is called
when memory previously acquired from the object is no longer needed.
The exporter of the interface must make sure that any memory pointed
to in the bufferinfo structure remains valid until releasebuffer is
called.
    </p>
    <p>
     If the bf_releasebuffer function is not provided (i.e. it is NULL),
then it does not ever need to be called.
    </p>
    <p>
     Exporters will need to define a bf_releasebuffer function if they can
re-allocate their memory, strides, shape, suboffsets, or format
variables which they might share through the struct bufferinfo.
Several mechanisms could be used to keep track of how many getbuffer
calls have been made and shared.  Either a single variable could be
used to keep track of how many "views" have been exported, or a
linked-list of bufferinfo structures filled in could be maintained in
each object.
    </p>
    <p>
     All that is specifically required by the exporter, however, is to
ensure that any memory shared through the bufferinfo structure remains
valid until releasebuffer is called on the bufferinfo structure
exporting that memory.
    </p>
   </div>
  </div>
  <div class="section" id="new-c-api-calls-are-proposed">
   <h1>
    <a class="toc-backref" href="#id9">
     New C-API calls are proposed
    </a>
   </h1>
   <pre class="literal-block">
int PyObject_CheckBuffer(PyObject *obj)
</pre>
   <p>
    Return 1 if the getbuffer function is available otherwise 0.
   </p>
   <pre class="literal-block">
int PyObject_GetBuffer(PyObject *obj, Py_buffer *view,
                       int flags)
</pre>
   <p>
    This is a C-API version of the getbuffer function call.  It checks to
make sure object has the required function pointer and issues the
call.  Returns -1 and raises an error on failure and returns 0 on
success.
   </p>
   <pre class="literal-block">
void PyBuffer_Release(PyObject *obj, Py_buffer *view)
</pre>
   <p>
    This is a C-API version of the releasebuffer function call.  It checks
to make sure the object has the required function pointer and issues
the call.  This function always succeeds even if there is no releasebuffer
function for the object.
   </p>
   <pre class="literal-block">
PyObject *PyObject_GetMemoryView(PyObject *obj)
</pre>
   <p>
    Return a memory-view object from an object that defines the buffer interface.
   </p>
   <p>
    A memory-view object is an extended buffer object that could replace
the buffer object (but doesn't have to as that could be kept as a
simple 1-d memory-view object).  Its C-structure is
   </p>
   <pre class="literal-block">
typedef struct {
    PyObject_HEAD
    PyObject *base;
    Py_buffer view;
} PyMemoryViewObject;
</pre>
   <p>
    This is functionally similar to the current buffer object except a
reference to base is kept and the memory view is not re-grabbed.
Thus, this memory view object holds on to the memory of base until it
is deleted.
   </p>
   <p>
    This memory-view object will support multi-dimensional slicing and be
the first object provided with Python to do so.  Slices of the
memory-view object are other memory-view objects with the same base
but with a different view of the base object.
   </p>
   <p>
    When an "element" from the memory-view is returned it is always a
bytes object whose format should be interpreted by the format
attribute of the memoryview object.  The struct module can be used to
"decode" the bytes in Python if desired.  Or the contents can be
passed to a NumPy array or other object consuming the buffer protocol.
   </p>
   <p>
    The Python name will be
   </p>
   <p>
    <tt class="docutils literal">
     __builtin__.memoryview
    </tt>
   </p>
   <p>
    Methods:
   </p>
   <div class="line-block">
    <div class="line">
     <tt class="docutils literal">
      __getitem__
     </tt>
     (will support multi-dimensional slicing)
    </div>
    <div class="line">
     <tt class="docutils literal">
      __setitem__
     </tt>
     (will support multi-dimensional slicing)
    </div>
    <div class="line">
     <tt class="docutils literal">
      tobytes
     </tt>
     (obtain a new bytes-object of a copy of the memory).
    </div>
    <div class="line">
     <tt class="docutils literal">
      tolist
     </tt>
     (obtain a "nested" list of the memory.  Everything
is interpreted into standard Python objects
as the struct module unpack would do -- in fact
it uses struct.unpack to accomplish it).
    </div>
   </div>
   <p>
    Attributes (taken from the memory of the base object):
   </p>
   <ul class="simple">
    <li>
     <tt class="docutils literal">
      format
     </tt>
    </li>
    <li>
     <tt class="docutils literal">
      itemsize
     </tt>
    </li>
    <li>
     <tt class="docutils literal">
      shape
     </tt>
    </li>
    <li>
     <tt class="docutils literal">
      strides
     </tt>
    </li>
    <li>
     <tt class="docutils literal">
      suboffsets
     </tt>
    </li>
    <li>
     <tt class="docutils literal">
      readonly
     </tt>
    </li>
    <li>
     <tt class="docutils literal">
      ndim
     </tt>
    </li>
   </ul>
   <pre class="literal-block">
Py_ssize_t PyBuffer_SizeFromFormat(const char *)
</pre>
   <p>
    Return the implied itemsize of the data-format area from a struct-style
description.
   </p>
   <pre class="literal-block">
PyObject * PyMemoryView_GetContiguous(PyObject *obj,  int buffertype,
                                      char fortran)
</pre>
   <p>
    Return a memoryview object to a contiguous chunk of memory represented
by obj. If a copy must be made (because the memory pointed to by obj
is not contiguous), then a new bytes object will be created and become
the base object for the returned memory view object.
   </p>
   <p>
    The buffertype argument can be PyBUF_READ, PyBUF_WRITE,
PyBUF_UPDATEIFCOPY to determine whether the returned buffer should be
readable, writable, or set to update the original buffer if a copy
must be made.  If buffertype is PyBUF_WRITE and the buffer is not
contiguous an error will be raised.  In this circumstance, the user
can use PyBUF_UPDATEIFCOPY to ensure that a a writable temporary
contiguous buffer is returned.  The contents of this contiguous buffer
will be copied back into the original object after the memoryview
object is deleted as long as the original object is writable.  If this
is not allowed by the original object, then a BufferError is raised.
   </p>
   <p>
    If the object is multi-dimensional, then if fortran is 'F', the first
dimension of the underlying array will vary the fastest in the buffer.
If fortran is 'C', then the last dimension will vary the fastest
(C-style contiguous). If fortran is 'A', then it does not matter and
you will get whatever the object decides is more efficient.  If a copy
is made, then the memory must be freed by calling
    <tt class="docutils literal">
     PyMem_Free
    </tt>
    .
   </p>
   <p>
    You receive a new reference to the memoryview object.
   </p>
   <pre class="literal-block">
int PyObject_CopyToObject(PyObject *obj, void *buf, Py_ssize_t len,
                          char fortran)
</pre>
   <p>
    Copy
    <tt class="docutils literal">
     len
    </tt>
    bytes of data pointed to by the contiguous chunk of
memory pointed to by
    <tt class="docutils literal">
     buf
    </tt>
    into the buffer exported by obj.  Return
0 on success and return -1 and raise an error on failure.  If the
object does not have a writable buffer, then an error is raised.  If
fortran is 'F', then if the object is multi-dimensional, then the data
will be copied into the array in Fortran-style (first dimension varies
the fastest).  If fortran is 'C', then the data will be copied into
the array in C-style (last dimension varies the fastest).  If fortran
is 'A', then it does not matter and the copy will be made in whatever
way is more efficient.
   </p>
   <pre class="literal-block">
int PyObject_CopyData(PyObject *dest, PyObject *src)
</pre>
   <p>
    These last three C-API calls allow a standard way of getting data in and
out of Python objects into contiguous memory areas no matter how it is
actually stored.  These calls use the extended buffer interface to perform
their work.
   </p>
   <pre class="literal-block">
int PyBuffer_IsContiguous(Py_buffer *view, char fortran)
</pre>
   <p>
    Return 1 if the memory defined by the view object is C-style (fortran
= 'C') or Fortran-style (fortran = 'F') contiguous or either one
(fortran = 'A').  Return 0 otherwise.
   </p>
   <pre class="literal-block">
void PyBuffer_FillContiguousStrides(int ndim, Py_ssize_t *shape,
                                    Py_ssize_t *strides, Py_ssize_t itemsize,
                                    char fortran)
</pre>
   <p>
    Fill the strides array with byte-strides of a contiguous (C-style if
fortran is 'C' or Fortran-style if fortran is 'F' array of the given
shape with the given number of bytes per element.
   </p>
   <pre class="literal-block">
int PyBuffer_FillInfo(Py_buffer *view, void *buf,
                      Py_ssize_t len, int readonly, int infoflags)
</pre>
   <p>
    Fills in a buffer-info structure correctly for an exporter that can
only share a contiguous chunk of memory of "unsigned bytes" of the
given length.  Returns 0 on success and -1 (with raising an error) on
error.
   </p>
   <pre class="literal-block">
PyExc_BufferError
</pre>
   <p>
    A new error object for returning buffer errors which arise because an
exporter cannot provide the kind of buffer that a consumer expects.
This will also be raised when a consumer requests a buffer from an
object that does not provide the protocol.
   </p>
  </div>
  <div class="section" id="additions-to-the-struct-string-syntax">
   <h1>
    <a class="toc-backref" href="#id10">
     Additions to the struct string-syntax
    </a>
   </h1>
   <p>
    The struct string-syntax is missing some characters to fully
implement data-format descriptions already available elsewhere (in
ctypes and NumPy for example).  The Python 2.5 specification is
at
    <a class="reference external" href="http://docs.python.org/library/struct.html">
     http://docs.python.org/library/struct.html
    </a>
    .
   </p>
   <p>
    Here are the proposed additions:
   </p>
   <table border="1" class="docutils">
    <colgroup>
     <col width="24%">
     </col>
     <col width="76%">
     </col>
    </colgroup>
    <thead valign="bottom">
     <tr>
      <th class="head">
       Character
      </th>
      <th class="head">
       Description
      </th>
     </tr>
    </thead>
    <tbody valign="top">
     <tr>
      <td>
       't'
      </td>
      <td>
       bit (number before states how many bits)
      </td>
     </tr>
     <tr>
      <td>
       '?'
      </td>
      <td>
       platform _Bool type
      </td>
     </tr>
     <tr>
      <td>
       'g'
      </td>
      <td>
       long double
      </td>
     </tr>
     <tr>
      <td>
       'c'
      </td>
      <td>
       ucs-1 (latin-1) encoding
      </td>
     </tr>
     <tr>
      <td>
       'u'
      </td>
      <td>
       ucs-2
      </td>
     </tr>
     <tr>
      <td>
       'w'
      </td>
      <td>
       ucs-4
      </td>
     </tr>
     <tr>
      <td>
       'O'
      </td>
      <td>
       pointer to Python Object
      </td>
     </tr>
     <tr>
      <td>
       'Z'
      </td>
      <td>
       complex (whatever the next specifier is)
      </td>
     </tr>
     <tr>
      <td>
       '&amp;'
      </td>
      <td>
       specific pointer (prefix before another character)
      </td>
     </tr>
     <tr>
      <td>
       'T{}'
      </td>
      <td>
       structure (detailed layout inside {})
      </td>
     </tr>
     <tr>
      <td>
       '(k1,k2,...,kn)'
      </td>
      <td>
       multi-dimensional array of whatever follows
      </td>
     </tr>
     <tr>
      <td>
       ':name:'
      </td>
      <td>
       optional name of the preceeding element
      </td>
     </tr>
     <tr>
      <td>
       'X{}'
      </td>
      <td>
       <dl class="first last docutils">
        <dt>
         pointer to a function (optional function
        </dt>
        <dd>
         signature inside {} with any return value
preceeded by -&gt; and placed at the end)
        </dd>
       </dl>
      </td>
     </tr>
    </tbody>
   </table>
   <p>
    The struct module will be changed to understand these as well and
return appropriate Python objects on unpacking.  Unpacking a
long-double will return a decimal object or a ctypes long-double.
Unpacking 'u' or 'w' will return Python unicode.  Unpacking a
multi-dimensional array will return a list (of lists if &gt;1d).
Unpacking a pointer will return a ctypes pointer object. Unpacking a
function pointer will return a ctypes call-object (perhaps). Unpacking
a bit will return a Python Bool.  White-space in the struct-string
syntax will be ignored if it isn't already.  Unpacking a named-object
will return some kind of named-tuple-like object that acts like a
tuple but whose entries can also be accessed by name. Unpacking a
nested structure will return a nested tuple.
   </p>
   <p>
    Endian-specification ('!', '@','=','&gt;','&lt;', '^') is also allowed
inside the string so that it can change if needed.  The
previously-specified endian string is in force until changed.  The
default endian is '@' which means native data-types and alignment.  If
un-aligned, native data-types are requested, then the endian
specification is '^'.
   </p>
   <p>
    According to the struct-module, a number can preceed a character
code to specify how many of that type there are.  The
    <tt class="docutils literal">
     <span class="pre">
      (k1,k2,...,kn)
     </span>
    </tt>
    extension also allows specifying if the data is
supposed to be viewed as a (C-style contiguous, last-dimension
varies the fastest) multi-dimensional array of a particular format.
   </p>
   <p>
    Functions should be added to ctypes to create a ctypes object from
a struct description, and add long-double, and ucs-2 to ctypes.
   </p>
  </div>
  <div class="section" id="examples-of-data-format-descriptions">
   <h1>
    <a class="toc-backref" href="#id11">
     Examples of Data-Format Descriptions
    </a>
   </h1>
   <p>
    Here are some examples of C-structures and how they would be
represented using the struct-style syntax.
   </p>
   <p>
    &lt;named&gt; is the constructor for a named-tuple (not-specified yet).
   </p>
   <dl class="docutils">
    <dt>
     float
    </dt>
    <dd>
     <tt class="docutils literal">
      'd'
     </tt>
     &lt;--&gt; Python float
    </dd>
    <dt>
     complex double
    </dt>
    <dd>
     <tt class="docutils literal">
      'Zd'
     </tt>
     &lt;--&gt; Python complex
    </dd>
    <dt>
     RGB Pixel data
    </dt>
    <dd>
     <tt class="docutils literal">
      'BBB'
     </tt>
     &lt;--&gt; (int, int, int)
     <tt class="docutils literal">
      'B:r: B:g: B:b:'
     </tt>
     &lt;--&gt; &lt;named&gt;((int, int, int), ('r','g','b'))
    </dd>
    <dt>
     Mixed endian (weird but possible)
    </dt>
    <dd>
     <tt class="docutils literal">
      '&gt;i:big: &lt;i:little:'
     </tt>
     &lt;--&gt; &lt;named&gt;((int, int), ('big', 'little'))
    </dd>
    <dt>
     Nested structure
    </dt>
    <dd>
     <pre class="first last literal-block">
struct {
     int ival;
     struct {
         unsigned short sval;
         unsigned char bval;
         unsigned char cval;
     } sub;
}
"""i:ival:
   T{
      H:sval:
      B:bval:
      B:cval:
    }:sub:
"""
</pre>
    </dd>
    <dt>
     Nested array
    </dt>
    <dd>
     <pre class="first last literal-block">
struct {
     int ival;
     double data[16*4];
}
"""i:ival:
   (16,4)d:data:
"""
</pre>
    </dd>
   </dl>
   <p>
    Note, that in the last example, the C-structure compared against is
intentionally a 1-d array and not a 2-d array data[16][4].  The reason
for this is to avoid the confusions between static multi-dimensional
arrays in C (which are layed out contiguously) and dynamic
multi-dimensional arrays which use the same syntax to access elements,
data[0][1], but whose memory is not necessarily contiguous.  The
struct-syntax
    <em>
     always
    </em>
    uses contiguous memory and the
multi-dimensional character is information about the memory to be
communicated by the exporter.
   </p>
   <p>
    In other words, the struct-syntax description does not have to match
the C-syntax exactly as long as it describes the same memory layout.
The fact that a C-compiler would think of the memory as a 1-d array of
doubles is irrelevant to the fact that the exporter wanted to
communicate to the consumer that this field of the memory should be
thought of as a 2-d array where a new dimension is considered after
every 4 elements.
   </p>
  </div>
  <div class="section" id="code-to-be-affected">
   <h1>
    <a class="toc-backref" href="#id12">
     Code to be affected
    </a>
   </h1>
   <p>
    All objects and modules in Python that export or consume the old
buffer interface will be modified.  Here is a partial list.
   </p>
   <ul class="simple">
    <li>
     buffer object
    </li>
    <li>
     bytes object
    </li>
    <li>
     string object
    </li>
    <li>
     unicode object
    </li>
    <li>
     array module
    </li>
    <li>
     struct module
    </li>
    <li>
     mmap module
    </li>
    <li>
     ctypes module
    </li>
   </ul>
   <p>
    Anything else using the buffer API.
   </p>
  </div>
  <div class="section" id="issues-and-details">
   <h1>
    <a class="toc-backref" href="#id13">
     Issues and Details
    </a>
   </h1>
   <p>
    It is intended that this PEP will be back-ported to Python 2.6 by
adding the C-API and the two functions to the existing buffer
protocol.
   </p>
   <p>
    Previous versions of this PEP proposed a read/write locking scheme,
but it was later perceived as a) too complicated for common simple use
cases that do not require any locking and b) too simple for use cases
that required concurrent read/write access to a buffer with changing,
short-living locks.  It is therefore left to users to implement their
own specific locking scheme around buffer objects if they require
consistent views across concurrent read/write access.  A future PEP
may be proposed which includes a separate locking API after some
experience with these user-schemes is obtained
   </p>
   <p>
    The sharing of strided memory and suboffsets is new and can be seen as
a modification of the multiple-segment interface.  It is motivated by
NumPy and the PIL.  NumPy objects should be able to share their
strided memory with code that understands how to manage strided memory
because strided memory is very common when interfacing with compute
libraries.
   </p>
   <p>
    Also, with this approach it should be possible to write generic code
that works with both kinds of memory without copying.
   </p>
   <p>
    Memory management of the format string, the shape array, the strides
array, and the suboffsets array in the bufferinfo structure is always
the responsibility of the exporting object.  The consumer should not
set these pointers to any other memory or try to free them.
   </p>
   <p>
    Several ideas were discussed and rejected:
   </p>
   <blockquote>
    <p>
     Having a "releaser" object whose release-buffer was called.  This
was deemed unacceptable because it caused the protocol to be
asymmetric (you called release on something different than you
"got" the buffer from).  It also complicated the protocol without
providing a real benefit.
    </p>
    <p>
     Passing all the struct variables separately into the function.
This had the advantage that it allowed one to set NULL to
variables that were not of interest, but it also made the function
call more difficult.  The flags variable allows the same
ability of consumers to be "simple" in how they call the protocol.
    </p>
   </blockquote>
  </div>
  <div class="section" id="code">
   <h1>
    <a class="toc-backref" href="#id14">
     Code
    </a>
   </h1>
   <p>
    The authors of the PEP promise to contribute and maintain the code for
this proposal but will welcome any help.
   </p>
  </div>
  <div class="section" id="examples">
   <h1>
    <a class="toc-backref" href="#id15">
     Examples
    </a>
   </h1>
   <div class="section" id="ex-1">
    <h2>
     <a class="toc-backref" href="#id16">
      Ex. 1
     </a>
    </h2>
    <p>
     This example shows how an image object that uses contiguous lines might expose its buffer:
    </p>
    <pre class="literal-block">
struct rgba {
    unsigned char r, g, b, a;
};

struct ImageObject {
    PyObject_HEAD;
    ...
    struct rgba** lines;
    Py_ssize_t height;
    Py_ssize_t width;
    Py_ssize_t shape_array[2];
    Py_ssize_t stride_array[2];
    Py_ssize_t view_count;
};
</pre>
    <p>
     "lines" points to malloced 1-D array of
     <tt class="docutils literal">
      (struct rgba*)
     </tt>
     .  Each pointer
in THAT block points to a seperately malloced array of
     <tt class="docutils literal">
      (struct rgba)
     </tt>
     .
    </p>
    <p>
     In order to access, say, the red value of the pixel at x=30, y=50, you'd use "lines[50][30].r".
    </p>
    <p>
     So what does ImageObject's getbuffer do?  Leaving error checking out:
    </p>
    <pre class="literal-block">
int Image_getbuffer(PyObject *self, Py_buffer *view, int flags) {

    static Py_ssize_t suboffsets[2] = { 0, -1};

    view-&gt;buf = self-&gt;lines;
    view-&gt;len = self-&gt;height*self-&gt;width;
    view-&gt;readonly = 0;
    view-&gt;ndims = 2;
    self-&gt;shape_array[0] = height;
    self-&gt;shape_array[1] = width;
    view-&gt;shape = &amp;self-&gt;shape_array;
    self-&gt;stride_array[0] = sizeof(struct rgba*);
    self-&gt;stride_array[1] = sizeof(struct rgba);
    view-&gt;strides = &amp;self-&gt;stride_array;
    view-&gt;suboffsets = suboffsets;

    self-&gt;view_count ++;

    return 0;
}


int Image_releasebuffer(PyObject *self, Py_buffer *view) {
    self-&gt;view_count--;
    return 0;
}
</pre>
   </div>
   <div class="section" id="ex-2">
    <h2>
     <a class="toc-backref" href="#id17">
      Ex. 2
     </a>
    </h2>
    <p>
     This example shows how an object that wants to expose a contiguous
chunk of memory (which will never be re-allocated while the object is
alive) would do that.
    </p>
    <pre class="literal-block">
int myobject_getbuffer(PyObject *self, Py_buffer *view, int flags) {

    void *buf;
    Py_ssize_t len;
    int readonly=0;

    buf = /* Point to buffer */
    len = /* Set to size of buffer */
    readonly = /* Set to 1 if readonly */

    return PyObject_FillBufferInfo(view, buf, len, readonly, flags);
}

/* No releasebuffer is necessary because the memory will never
   be re-allocated
*/
</pre>
   </div>
   <div class="section" id="ex-3">
    <h2>
     <a class="toc-backref" href="#id18">
      Ex.  3
     </a>
    </h2>
    <p>
     A consumer that wants to only get a simple contiguous chunk of bytes
from a Python object, obj would do the following:
    </p>
    <pre class="literal-block">
Py_buffer view;
int ret;

if (PyObject_GetBuffer(obj, &amp;view, Py_BUF_SIMPLE) &lt; 0) {
     /* error return */
}

/* Now, view.buf is the pointer to memory
        view.len is the length
        view.readonly is whether or not the memory is read-only.
 */


/* After using the information and you don't need it anymore */

if (PyBuffer_Release(obj, &amp;view) &lt; 0) {
        /* error return */
}
</pre>
   </div>
   <div class="section" id="ex-4">
    <h2>
     <a class="toc-backref" href="#id19">
      Ex. 4
     </a>
    </h2>
    <p>
     A consumer that wants to be able to use any object's memory but is
writing an algorithm that only handle contiguous memory could do the following:
    </p>
    <pre class="literal-block">
void *buf;
Py_ssize_t len;
char *format;
int copy;

copy = PyObject_GetContiguous(obj, &amp;buf, &amp;len, &amp;format, 0, 'A');
if (copy &lt; 0) {
   /* error return */
}

/* process memory pointed to by buffer if format is correct */

/* Optional:

   if, after processing, we want to copy data from buffer back
   into the object

   we could do
   */

if (PyObject_CopyToObject(obj, buf, len, 'A') &lt; 0) {
       /*        error return */
}

/* Make sure that if a copy was made, the memory is freed */
if (copy == 1) PyMem_Free(buf);
</pre>
   </div>
  </div>
  <div class="section" id="copyright">
   <h1>
    <a class="toc-backref" href="#id20">
     Copyright
    </a>
   </h1>
   <p>
    This PEP is placed in the public domain.
   </p>
  </div>
 </body>

<!-- Mirrored from www.python.org/dev/peps/pep-3118/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 03 Sep 2015 04:35:22 GMT -->
</html>Source: <a href="https://hg.python.org/peps/file/tip/pep-3118.txt">https://hg.python.org/peps/file/tip/pep-3118.txt</a>

    </article>


                </section>

                


<aside class="left-sidebar" role="secondary">

    






    





        <div class="twitter-widget sidebar-widget">
        <a class="twitter-timeline" data-dnt="true" href="https://twitter.com/ThePSF" data-widget-id="434113224703610882">Tweets by @ThePSF</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </div>

    <div class="psf-sidebar-widget sidebar-widget">
        <h3 class="widget-title">The PSF</h3>
<p>The Python Software Foundation is the organization behind Python. Become a member of the PSF and help advance the software and our mission. </p>

    </div>

</aside>



                
                


            </div><!-- end .container -->
        </div><!-- end #content .content-wrapper -->

        <!-- Footer and social media list -->
        <footer id="site-map" class="main-footer" role="contentinfo">
            <div class="main-footer-links">
                <div class="container">

                    
                    <a id="back-to-top-1" class="jump-link" href="#python-network"><span aria-hidden="true" class="icon-arrow-up"><span>&#9650;</span></span> Back to Top</a>

                    

<ul class="sitemap navigation menu do-not-print" role="tree" id="container">
    
    <li class="tier-1 element-1">
        <a href="https://www.python.org/about/" >About</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/about/apps/" title="">Applications</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/about/quotes/" title="">Quotes</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/about/gettingstarted/" title="">Getting Started</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/about/help/" title="">Help</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-2">
        <a href="https://www.python.org/downloads/" >Downloads</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/downloads/" title="">All releases</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/downloads/source/" title="">Source code</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/downloads/windows/" title="">Windows</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/downloads/mac-osx/" title="">Mac OS X</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/download/other/" title="">Other Platforms</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://docs.python.org/3/license.html" title="">License</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/download/alternatives" title="">Alternative Implementations</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-3">
        <a href="https://www.python.org/doc/" >Documentation</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/doc/" title="">Docs</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/doc/av" title="">Audio/Visual Talks</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://wiki.python.org/moin/BeginnersGuide" title="">Beginner&#39;s Guide</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://docs.python.org/devguide/" title="">Developer&#39;s Guide</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://docs.python.org/faq/" title="">FAQ</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="http://wiki.python.org/moin/Languages" title="">Non-English Docs</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="../index.html" title="">PEP Index</a></li>
    
        <li class="tier-2 element-8" role="treeitem"><a href="https://wiki.python.org/moin/PythonBooks" title="">Python Books</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-4">
        <a href="https://www.python.org/community/" >Community</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/community/diversity/" title="">Diversity</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/community/irc/" title="">IRC</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/community/lists/" title="">Mailing Lists</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/community/workshops/" title="">Python Conferences</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/community/sigs/" title="">Special Interest Groups</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://wiki.python.org/moin/" title="">Python Wiki</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/community/logos/" title="">Python Logo</a></li>
    
        <li class="tier-2 element-8" role="treeitem"><a href="https://www.python.org/community/merchandise/" title="">Merchandise</a></li>
    
        <li class="tier-2 element-9" role="treeitem"><a href="https://www.python.org/community/awards" title="">Community Awards</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-5">
        <a href="https://www.python.org/about/success/" title="success-stories">Success Stories</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/about/success/#arts" title="">Arts</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/about/success/#business" title="">Business</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/about/success/#education" title="">Education</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/about/success/#engineering" title="">Engineering</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://www.python.org/about/success/#government" title="">Government</a></li>
    
        <li class="tier-2 element-6" role="treeitem"><a href="https://www.python.org/about/success/#scientific" title="">Scientific</a></li>
    
        <li class="tier-2 element-7" role="treeitem"><a href="https://www.python.org/about/success/#software-development" title="">Software Development</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-6">
        <a href="https://www.python.org/blogs/" title="News from around the Python world">News</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/blogs/" title="Python Insider Blog Posts">Python News</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="http://planetpython.org/" title="Planet Python">Community News</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="http://pyfound.blogspot.com/" title="PSF Blog">PSF News</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="http://pycon.blogspot.com/" title="PyCon Blog">PyCon News</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-7">
        <a href="https://www.python.org/events/" >Events</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="https://www.python.org/events/python-events/" title="">Python Events</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="https://www.python.org/events/python-user-group/" title="">User Group Events</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://www.python.org/events/python-events/past/" title="">Python Events Archive</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="https://www.python.org/events/python-user-group/past/" title="">User Group Events Archive</a></li>
    
        <li class="tier-2 element-5" role="treeitem"><a href="https://wiki.python.org/moin/PythonEventsCalendar#Submitting_an_Event" title="">Submit an Event</a></li>
    
</ul>

        
    </li>
    
    <li class="tier-1 element-8">
        <a href="https://www.python.org/dev/" >Contributing</a>
        
            

<ul class="subnav menu">
    
        <li class="tier-2 element-1" role="treeitem"><a href="http://docs.python.org/devguide/" title="">Developer&#39;s Guide</a></li>
    
        <li class="tier-2 element-2" role="treeitem"><a href="http://bugs.python.org/" title="">Issue Tracker</a></li>
    
        <li class="tier-2 element-3" role="treeitem"><a href="https://mail.python.org/mailman/listinfo/python-dev" title="">python-dev list</a></li>
    
        <li class="tier-2 element-4" role="treeitem"><a href="http://pythonmentors.com/" title="">Core Mentorship</a></li>
    
</ul>

        
    </li>
    
</ul>


                    <a id="back-to-top-2" class="jump-link" href="#python-network"><span aria-hidden="true" class="icon-arrow-up"><span>&#9650;</span></span> Back to Top</a>
                    

                </div><!-- end .container -->
            </div> <!-- end .main-footer-links -->

            <div class="site-base">
                <div class="container">
                    
                    <ul class="footer-links navigation menu do-not-print" role="tree">
                        <li class="tier-1 element-1"><a href="https://www.python.org/about/help/">Help &amp; <span class="say-no-more">General</span> Contact</a></li>
                        <li class="tier-1 element-2"><a href="https://www.python.org/community/diversity/">Diversity <span class="say-no-more">Initiatives</span></a></li>
                        <li class="tier-1 element-3"><a href="https://github.com/python/pythondotorg/issues">Submit Website Bug</a></li>
                        <!--<li class="tier-1 element-3"><a href="#"><span class="say-no-more">Website</span> Colophon</a></li>-->
                    </ul>

                    <div class="copyright">
                        <p><small>
                            <span class="pre">Copyright &copy;2001-2015.</span>
                            &nbsp;<span class="pre"><a href="https://www.python.org/psf-landing/">Python Software Foundation</a></span>
                            &nbsp;<span class="pre"><a href="https://www.python.org/about/legal/">Legal Statements</a></span>
                            &nbsp;<span class="pre"><a href="https://www.python.org/privacy/">Privacy Policy</a></span>
                        </small></p>
                    </div>

                </div><!-- end .container -->
            </div><!-- end .site-base -->

        </footer>

    </div><!-- end #touchnav-wrapper -->

    
    <script src="../../../../ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../../static/js/libs/jquery-1.8.2.min.js"><\/script>')</script>

    <script src="../../../static/js/libs/masonry.pkgd.min.js"></script>

    <script type="text/javascript" src="../../../static/js/main-min.js" charset="utf-8"></script>
    

    <!--[if lte IE 7]>
    <script type="text/javascript" src="/static/js/plugins/IE8-min.js" charset="utf-8"></script>
    
    
    <![endif]-->

    <!--[if lte IE 8]>
    <script type="text/javascript" src="/static/js/plugins/getComputedStyle-min.js" charset="utf-8"></script>
    
    
    <![endif]-->

    

    
    

</body>
</html>
